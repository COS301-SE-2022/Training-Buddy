"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[195],{8195:(R,w,a)=>{a.r(w),a.d(w,{ClientAthleteProfileFeatureModule:()=>Y});var _=a(9808),b=a(5357),p=a(1777),r=a(3075),x=a(9444),t=a(5e3),s=a(2160),c=a(5436),d=a(6971),g=a(3954),f=a(9224),v=a(7322),h=a(7446),l=a(8029),C=a(7531),Z=a(7423),y=a(987);function M(i,m){1&i&&t._UZ(0,"training-buddy-unsigned-navbar")}function I(i,m){1&i&&t._UZ(0,"training-buddy-back-navbar",23)}function U(i,m){if(1&i){const e=t.EpF();t.TgZ(0,"div",13)(1,"div",14)(2,"mat-slider",24),t.NdJ("input",function(o){return t.CHM(e),t.oxw().moveRun(o.value)}),t.qZA()(),t.TgZ(3,"div",16)(4,"div",17)(5,"mat-label"),t._uU(6),t.qZA()()()()}if(2&i){const e=t.oxw();t.xp6(2),t.s9C("value",e.runRating),t.xp6(4),t.hij("",e.runRating,"/5 ")}}function P(i,m){if(1&i){const e=t.EpF();t.TgZ(0,"div",13)(1,"div",14)(2,"mat-slider",25),t.NdJ("input",function(o){return t.CHM(e),t.oxw().moveRide(o.value)}),t.qZA()(),t.TgZ(3,"div",16)(4,"div",17)(5,"mat-label"),t._uU(6),t.qZA()()()()}if(2&i){const e=t.oxw();t.xp6(2),t.s9C("value",e.rideRating),t.xp6(4),t.hij("",e.rideRating,"/5 ")}}function N(i,m){if(1&i){const e=t.EpF();t.TgZ(0,"div",13)(1,"div",14)(2,"mat-slider",24),t.NdJ("input",function(o){return t.CHM(e),t.oxw().moveSwim(o.value)}),t.qZA()(),t.TgZ(3,"div",16)(4,"div",17)(5,"mat-label"),t._uU(6),t.qZA()()()()}if(2&i){const e=t.oxw();t.xp6(2),t.s9C("value",e.swimRating),t.xp6(4),t.hij("",e.swimRating,"/5 ")}}function F(i,m){if(1&i){const e=t.EpF();t.TgZ(0,"div",13)(1,"div",14)(2,"mat-slider",24),t.NdJ("input",function(o){return t.CHM(e),t.oxw().moveLift(o.value)}),t.qZA()(),t.TgZ(3,"div",16)(4,"div",17)(5,"mat-label"),t._uU(6),t.qZA()()()()}if(2&i){const e=t.oxw();t.xp6(2),t.s9C("value",e.liftRating),t.xp6(4),t.hij("",e.liftRating,"/5 ")}}function J(i,m){1&i&&(t.TgZ(0,"mat-error"),t._uU(1,"At least one activity is required"),t.qZA())}function L(i,m){1&i&&t._UZ(0,"br")}function E(i,m){1&i&&t._UZ(0,"br")}function O(i,m){1&i&&t._UZ(0,"training-buddy-navbar")}let k=(()=>{class i{constructor(e,n,o,u,A,T){this.frm=e,this.apollo=n,this.router=o,this.cookieService=u,this.activated=A,this.cookie=T,this.runRating=0,this.swimRating=0,this.rideRating=0,this.liftRating=0,this.update=!1,this.sliderDefault=2,this.img="https://images.unsplash.com/photo-1512941675424-1c17dabfdddc?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2670&q=80",null!=this.activated.snapshot.paramMap.get("flag")&&(this.update=!0,this.img=""),this.frmBuilder=e,this.noActivityChosen=!1,this.radius=2,this.runRating=0,this.liftRating=0,this.swimRating=0,this.rideRating=0,this.email=this.cookieService.get("email"),this.running=!1,this.riding=!1,this.swimming=!1,this.lifting=!1}sliderMove(e){this.radius=e}moveRun(e){this.runRating=e}moveRide(e){this.rideRating=e}moveSwim(e){this.swimRating=e}moveLift(e){this.liftRating=e}toggleRunning(){this.running=!this.running,this.running||(this.runRating=0)}toggleRiding(){this.riding=!this.riding,this.riding||(this.rideRating=0)}toggleSwimming(){this.swimming=!this.swimming,this.swimming||(this.swimRating=0)}toggleLifting(){this.lifting=!this.lifting,this.lifting||(this.liftRating=0)}ngOnInit(){this.prefFrm=this.frmBuilder.group({running:[""],riding:[""],swimming:[""],weightLifting:[""],bio:["",[r.kI.required,r.kI.minLength(30)]]}),this.update&&this.getCurrentUser().subscribe({next:e=>{const n=e.data.getOne,o=n.metrics;this.radius=n.distance,this.sliderDefault=n.distance;const u=n.bio;o.run>0&&(this.running=!0,this.runRating=o.run),o.ride>0&&(this.riding=!0,this.rideRating=o.ride),o.swim>0&&(this.swimming=!0,this.swimRating=o.swim),o.lift>0&&(this.lifting=!0,this.liftRating=o.lift),this.prefFrm.setValue({running:o.run,riding:o.ride,swimming:o.swim,weightLifting:o.lift,bio:u})}})}getCurrentUser(){return this.apollo.query({query:x.Ps`query{getOne(
        email:"${this.email}"
      ){
          userName,
          userSurname,
          location,
          longitude,
          latitude,
          stravaToken,
          dob,
          gender,
          email,
          cellNumber,
          bio,
          metrics{lift , ride , run , swim},
          buddies,
          distance
      }
      }
      `})}updateError(){const e=this.prefFrm.controls.running.value||!1,n=this.prefFrm.controls.riding.value||!1,o=this.prefFrm.controls.swimming.value||!1,u=this.prefFrm.controls.weightLifting.value||!1;this.noActivityChosen=!1,e||n||o||u||(this.noActivityChosen=!0)}save(){const e=this.prefFrm.controls.running.value||!1,n=this.prefFrm.controls.riding.value||!1,o=this.prefFrm.controls.swimming.value||!1,u=this.prefFrm.controls.weightLifting.value||!1,A=this.prefFrm.controls.bio.value;if(this.noActivityChosen=!1,e||n||o||u||(this.noActivityChosen=!0),!this.prefFrm.invalid){if(this.update)return void this.updateProfile(this.email,e,n,o,u,A,this.radius).subscribe({next:()=>{this.router.navigate(["/settings"])}});this.setProfile(this.email,A,this.radius).subscribe({next:()=>{this.router.navigate(["/uploadimage"])}})}}updateProfile(e,n,o,u,A,T,Q){return this.apollo.mutate({mutation:x.Ps`

        `})}setProfile(e,n,o){return this.apollo.mutate({mutation:x.Ps`mutation{
        userConfig(userConfig:{
          email : "${e}",
          distance : ${o},
          riding: ${this.rideRating},
          running: ${this.runRating},
          swimming: ${this.swimRating},
          weightLifting: ${this.liftRating},
          bio: "${n}",
        }){
          message
        }
      }
      `})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(r.qu),t.Y36(x._M),t.Y36(b.F0),t.Y36(s.N),t.Y36(b.gz),t.Y36(s.N))},i.\u0275cmp=t.Xpm({type:i,selectors:[["training-buddy-athlete-profile"]],decls:55,vars:16,consts:[[1,"font-serif"],[4,"ngIf"],["title","Activity Settings",4,"ngIf"],["cols","1","rows","1","rowHeight","2:1",1,"pb-20"],[3,"formGroup"],[1,"text-center","mb-0","pb-0"],[1,"text-base"],[1,""],["formControlName","running",1,"mt-2",3,"change","click"],["class","grid grid-flow-row-dense grid-cols-8",4,"ngIf"],["formControlName","riding",3,"change","click"],["formControlName","swimming",3,"change","click"],["formControlName","weightLifting",3,"change","click"],[1,"grid","grid-flow-row-dense","grid-cols-8"],[1,"col-span-7"],["step","2","min","2","max","50","aria-label","units",3,"value","input"],[1,"content-center"],[1,"mt-3","ml-1"],["appearance","outline",1,"example-full-width","mt-4"],["formControlName","bio","matInput","","placeholder","I love the outdoors and going on adventures...",3,"maxLength"],[3,"align"],[1,"submitButton","mt-3"],["id","signup","mat-raised-button","","color","primary",1,"text-center","ml-1",3,"click"],["title","Activity Settings"],["step","0.1","min","0","max","5","aria-label","units",3,"value","input"],["step","0.1","min","0","max","5","aria-label"," units",3,"value","input"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.YNc(1,M,1,0,"training-buddy-unsigned-navbar",1),t.YNc(2,I,1,0,"training-buddy-back-navbar",2),t.TgZ(3,"mat-grid-list",3)(4,"mat-card")(5,"mat-card-content")(6,"form",4)(7,"p",5)(8,"mat-label",6),t._uU(9," Select and rate your ability for each activity"),t.qZA(),t._UZ(10,"br"),t.TgZ(11,"mat-hint",7),t._uU(12,"These will be updated as you do activities later."),t.qZA()(),t.TgZ(13,"mat-checkbox",8),t.NdJ("change",function(){return n.updateError()})("click",function(){return n.toggleRunning()}),t._uU(14,"Running"),t.qZA(),t.YNc(15,U,7,2,"div",9),t._UZ(16,"br"),t.TgZ(17,"mat-checkbox",10),t.NdJ("change",function(){return n.updateError()})("click",function(){return n.toggleRiding()}),t._uU(18,"Riding"),t.qZA(),t.YNc(19,P,7,2,"div",9),t._UZ(20,"br"),t.TgZ(21,"mat-checkbox",11),t.NdJ("change",function(){return n.updateError()})("click",function(){return n.toggleSwimming()}),t._uU(22,"Swimming"),t.qZA(),t.YNc(23,N,7,2,"div",9),t._UZ(24,"br"),t.TgZ(25,"mat-checkbox",12),t.NdJ("change",function(){return n.updateError()})("click",function(){return n.toggleLifting()}),t._uU(26,"Weight Lifting"),t.qZA(),t.YNc(27,F,7,2,"div",9),t.YNc(28,J,2,0,"mat-error",1),t.YNc(29,L,1,0,"br",1),t.YNc(30,E,1,0,"br",1),t.TgZ(31,"mat-label"),t._uU(32,"Buddy Distance:"),t.qZA(),t._UZ(33,"br"),t.TgZ(34,"mat-hint"),t._uU(35,"This is how far away a buddy can be and match with you (This can be updated later)"),t.qZA(),t.TgZ(36,"div",13)(37,"div",14)(38,"mat-slider",15),t.NdJ("input",function(u){return n.sliderMove(u.value)}),t.qZA()(),t.TgZ(39,"div",16)(40,"div",17)(41,"mat-label"),t._uU(42),t.qZA()()()(),t.TgZ(43,"mat-form-field",18)(44,"mat-label"),t._uU(45,"Athlete Bio"),t.qZA(),t._UZ(46,"textarea",19),t.TgZ(47,"mat-hint",20),t._uU(48,"30 characters minimum"),t.qZA(),t.TgZ(49,"mat-error"),t._uU(50,"Bio must be at least 30 characters long"),t.qZA()(),t.TgZ(51,"div",21)(52,"button",22),t.NdJ("click",function(){return n.save()}),t._uU(53,"Save"),t.qZA()()()()()(),t.YNc(54,O,1,0,"training-buddy-navbar",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",!n.update),t.xp6(1),t.Q6J("ngIf",n.update),t.xp6(1),t.Q6J("@fadeIn",void 0),t.xp6(3),t.Q6J("formGroup",n.prefFrm),t.xp6(9),t.Q6J("ngIf",n.running),t.xp6(4),t.Q6J("ngIf",n.riding),t.xp6(4),t.Q6J("ngIf",n.swimming),t.xp6(4),t.Q6J("ngIf",n.lifting),t.xp6(1),t.Q6J("ngIf",n.noActivityChosen),t.xp6(1),t.Q6J("ngIf",!n.noActivityChosen),t.xp6(1),t.Q6J("ngIf",!n.noActivityChosen),t.xp6(8),t.s9C("value",n.sliderDefault),t.xp6(4),t.hij("",n.radius,"km"),t.xp6(4),t.Q6J("maxLength",150),t.xp6(1),t.Q6J("align","end"),t.xp6(7),t.Q6J("ngIf",n.update))},directives:[_.O5,c.B,d.p,g.Il,f.a8,f.dn,r._Y,r.JL,r.sg,v.hX,v.bx,h.oG,r.JJ,r.u,l.pH,v.TO,v.KE,r.Fj,C.Nt,Z.lW,y.S],styles:["mat-card[_ngcontent-%COMP%]{max-width:400px;width:90vw;margin:2em auto;padding:2em auto;position:relative;background-color:#fff}.text-center[_ngcontent-%COMP%]{text-align:center}.submitButton[_ngcontent-%COMP%]{text-align:center;width:100%}.forgotpassword[_ngcontent-%COMP%]{text-align:right;text-decoration:underline}mat-form-field[_ngcontent-%COMP%]{display:block}.rightShift[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}#signup[_ngcontent-%COMP%]{width:100%;background-color:#1b1a1b!important}.nextButton[_ngcontent-%COMP%]{width:30%;background-color:#1b1a1b!important}.logIn[_ngcontent-%COMP%]{text-align:right;margin-top:1%;display:flex;flex-direction:row;justify-content:flex-end}.logInLink[_ngcontent-%COMP%]{text-decoration:underline;color:#4350af;margin-left:1%}.logInLink[_ngcontent-%COMP%]:hover{cursor:pointer}  .mat-form-field-wrapper{margin-bottom:-1.25em}.row[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end}p[_ngcontent-%COMP%]{font-size:12px!important}.fullhint[_ngcontent-%COMP%]{width:100%!important}#background[_ngcontent-%COMP%]{height:100vh;background-size:cover;background-repeat:no-repeat}mat-error[_ngcontent-%COMP%]{text-align:right}mat-hint[_ngcontent-%COMP%]{text-align:right!important}#center[_ngcontent-%COMP%]{text-align:center}textarea[_ngcontent-%COMP%]{max-height:12vh!important}  .mat-checkbox-checked .mat-checkbox-background, .mat-checkbox-indeterminate[_ngcontent-%COMP%]   .mat-checkbox-background[_ngcontent-%COMP%]{background-color:#1b1a1b!important}  .mat-slider-thumb{background-color:#1b1a1b!important}  .mat-slider-thumb-label{background-color:#1b1a1b!important}  .mat-slider-track-fill{background-color:#1b1a1b!important}mat-slider[_ngcontent-%COMP%]{width:100%}  .mat-form-field-appearance-outline .mat-form-field-outline{color:#1b1a1b!important}"],data:{animation:[(0,p.X$)("fadeIn",[(0,p.eR)(":enter",[(0,p.jt)(120,(0,p.F4)([(0,p.oB)({opacity:"0"}),(0,p.oB)({opacity:"1"})]))])])]}}),i})();const S=[{path:"",component:k},{path:":flag",component:k}];let D=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[b.Bz.forChild(S)],b.Bz]}),i})();var B=a(7918);let Y=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[r.qu,x._M,s.N],imports:[[_.ez,D,B.W,r.UX,r.u5]]}),i})()},2160:(R,w,a)=>{a.d(w,{N:()=>p});var _=a(5e3),b=a(9808);let p=(()=>{class r{constructor(t,s){this.document=t,this.platformId=s,this.documentIsAccessible=(0,b.NF)(this.platformId)}static getCookieRegExp(t){const s=t.replace(/([\[\]\{\}\(\)\|\=\;\+\?\,\.\*\^\$])/gi,"\\$1");return new RegExp("(?:^"+s+"|;\\s*"+s+")=(.*?)(?:;|$)","g")}static safeDecodeURIComponent(t){try{return decodeURIComponent(t)}catch(s){return t}}check(t){return!!this.documentIsAccessible&&(t=encodeURIComponent(t),r.getCookieRegExp(t).test(this.document.cookie))}get(t){if(this.documentIsAccessible&&this.check(t)){t=encodeURIComponent(t);const c=r.getCookieRegExp(t).exec(this.document.cookie);return c[1]?r.safeDecodeURIComponent(c[1]):""}return""}getAll(){if(!this.documentIsAccessible)return{};const t={},s=this.document;return s.cookie&&""!==s.cookie&&s.cookie.split(";").forEach(c=>{const[d,g]=c.split("=");t[r.safeDecodeURIComponent(d.replace(/^ /,""))]=r.safeDecodeURIComponent(g)}),t}set(t,s,c,d,g,f,v){if(!this.documentIsAccessible)return;if("number"==typeof c||c instanceof Date||d||g||f||v)return void this.set(t,s,{expires:c,path:d,domain:g,secure:f,sameSite:v||"Lax"});let h=encodeURIComponent(t)+"="+encodeURIComponent(s)+";";const l=c||{};l.expires&&(h+="number"==typeof l.expires?"expires="+new Date((new Date).getTime()+1e3*l.expires*60*60*24).toUTCString()+";":"expires="+l.expires.toUTCString()+";"),l.path&&(h+="path="+l.path+";"),l.domain&&(h+="domain="+l.domain+";"),!1===l.secure&&"None"===l.sameSite&&(l.secure=!0,console.warn(`[ngx-cookie-service] Cookie ${t} was forced with secure flag because sameSite=None.More details : https://github.com/stevermeister/ngx-cookie-service/issues/86#issuecomment-597720130`)),l.secure&&(h+="secure;"),l.sameSite||(l.sameSite="Lax"),h+="sameSite="+l.sameSite+";",this.document.cookie=h}delete(t,s,c,d,g="Lax"){if(!this.documentIsAccessible)return;const f=new Date("Thu, 01 Jan 1970 00:00:01 GMT");this.set(t,"",{expires:f,path:s,domain:c,secure:d,sameSite:g})}deleteAll(t,s,c,d="Lax"){if(!this.documentIsAccessible)return;const g=this.getAll();for(const f in g)g.hasOwnProperty(f)&&this.delete(f,t,s,c,d)}}return r.\u0275fac=function(t){return new(t||r)(_.LFG(b.K0),_.LFG(_.Lbi))},r.\u0275prov=_.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()}}]);