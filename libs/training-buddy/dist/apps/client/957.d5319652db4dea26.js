"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[957],{1957:(F,x,o)=>{o.r(x),o.d(x,{ClientAddmanualactivityFeatureModule:()=>E});var y=o(9808),b=o(7918),M=o(5357),n=o(3075),I=o(9444),t=o(5e3),a=o(1271),r=o(2160),d=o(6971),m=o(3954),g=o(9224),f=o(7322),p=o(7531),s=o(4107),A=o(508),k=o(6856),D=o(7423),P=o(987);function R(i,v){1&i&&(t.TgZ(0,"mat-error"),t._uU(1," Distance is required "),t.qZA())}function N(i,v){if(1&i&&(t.TgZ(0,"div")(1,"mat-form-field",4)(2,"mat-label"),t._uU(3,"Activity Distance (km)"),t.qZA(),t._UZ(4,"input",26),t.YNc(5,R,2,0,"mat-error",23),t.qZA()()),2&i){const e=t.oxw();t.xp6(5),t.Q6J("ngIf",e.manualForm.controls.distance.errors)}}const S=[{path:"",component:(()=>{class i{constructor(e,c,l,u){this.builder=e,this.apollo=c,this.snackBar=l,this.cookieService=u,this.img="https://images.unsplash.com/photo-1512941675424-1c17dabfdddc?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2670&q=80",this.email=this.cookieService.get("email"),this.frmBuilder=e,this.isWeightLifting=!1}ngOnInit(){this.manualForm=this.frmBuilder.group({name:["",[n.kI.required]],type:["Running",[n.kI.required]],hours:["01",[this.validateHours]],minutes:["00",[n.kI.required]],seconds:["00",[n.kI.required]],distance:["",[n.kI.required]],date:["",[n.kI.required]]})}validateHours(e){return e.value<0?{hours:"Hours cannot be negative"}:null==e.value?{hours:"Hours cannot be empty"}:null}activityToggle(e){this.isWeightLifting=!0,"WeightLifting"!=e&&(this.isWeightLifting=!1)}add(){const e=this.manualForm.controls.type.value||!1,c=this.manualForm.controls.name.value||!1,l=this.manualForm.controls.hours.value||!1,u=this.manualForm.controls.minutes.value||!1,h=this.manualForm.controls.seconds.value||!1,C=this.manualForm.controls.date.value||!1;if(this.isWeightLifting){const O=this.email;if(c&&l&&u&&h&&C){const w=this.calulateSeconds(l,u,h);return void this.addActivity(e,C,null,c,null,w,O).subscribe(()=>{this.resetForm(),this.snackBar.open("Activity Added","X",{duration:2e3})})}}if(this.manualForm.invalid)return;const Z=1e3*this.manualForm.controls.distance.value,U=this.calulateSeconds(l,u,h),T=this.calculateSpeed(U,Z);console.log(U),console.log(T),this.addActivity(e,C,Z,c,T,U,this.email).subscribe({next:()=>{this.resetForm(),this.snackBar.open("Activity Added","X",{duration:2e3})},error:()=>{this.snackBar.open("Add activity failed, please try again.","X",{duration:2e3})}})}resetForm(){this.manualForm.reset();for(const e in this.manualForm.controls)this.manualForm.controls[e].setErrors(null)}addActivity(e,c,l,u,h,C,Z){return this.apollo.mutate({mutation:I.Ps`
            mutation{
              activityLog(Activitylog:{
                name : "${u}",
                distance : ${l},
                speed: ${h},
                time : ${C},
                dateCompleted: "${c}",
                email: "${Z}",
                activityType: "${e}"
              }){
                message
              }

            }
          `})}calulateSeconds(e,c,l){return 60*e*60+60*c+l}calculateSpeed(e,c){return c/e}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(n.qu),t.Y36(I._M),t.Y36(a.ux),t.Y36(r.N))},i.\u0275cmp=t.Xpm({type:i,selectors:[["training-buddy-add-manual-activity"]],decls:55,vars:5,consts:[["title","Add Activity"],["cols","1","rows","1","rowHeight","2:1"],["id","grid"],[3,"formGroup"],["appearance","outline"],["formControlName","name","id","name","matInput","","type","text","placeholder","Afternoon Run","name","name"],["formControlName","type","id","type","name","type",3,"selectionChange"],["toggle",""],["value","Running","default",""],["value","Riding"],["value","Swimming"],["value","WeightLifting"],[1,"grid","grid-flow-row-dense","grid-cols-3","mt-2"],["appearance","outline",1,"col-span-1","mr-1"],["formControlName","hours","id","hours","matInput","","type","number","name","hours"],["appearance","outline",1,"col-span-1"],["formControlName","minutes","id","minutes","matInput","","type","number","name","minutes"],["appearance","outline",1,"col-span-1","ml-1"],["formControlName","seconds","id","seconds","matInput","","type","number","name","seconds"],["formControlName","date","id","date","matInput","",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],[3,"align"],[4,"ngIf"],[1,"submitButton","mt-3"],["id","signup","mat-raised-button","","color","primary",1,"text-center","ml-1",3,"click"],["formControlName","distance","id","distance","matInput","","type","number","placeholder","10","name","distance"]],template:function(e,c){if(1&e){const l=t.EpF();t._UZ(0,"training-buddy-back-navbar",0),t.TgZ(1,"mat-grid-list",1)(2,"mat-card",2)(3,"mat-card-content")(4,"form",3)(5,"mat-form-field",4)(6,"mat-label"),t._uU(7,"Activity Name"),t.qZA(),t._UZ(8,"input",5),t.TgZ(9,"mat-error"),t._uU(10," Name is required "),t.qZA()(),t.TgZ(11,"mat-form-field",4)(12,"mat-label"),t._uU(13,"Activity Type"),t.qZA(),t.TgZ(14,"mat-select",6,7),t.NdJ("selectionChange",function(){t.CHM(l);const h=t.MAs(15);return c.activityToggle(h.value)}),t.TgZ(16,"mat-option",8),t._uU(17,"Running"),t.qZA(),t.TgZ(18,"mat-option",9),t._uU(19,"Riding"),t.qZA(),t.TgZ(20,"mat-option",10),t._uU(21,"Swimming"),t.qZA(),t.TgZ(22,"mat-option",11),t._uU(23,"Weight Lifting"),t.qZA()()(),t.TgZ(24,"mat-label"),t._uU(25,"Activity Duration:"),t.qZA(),t.TgZ(26,"div",12)(27,"mat-form-field",13)(28,"mat-label"),t._uU(29,"Hours"),t.qZA(),t._UZ(30,"input",14),t.qZA(),t.TgZ(31,"mat-form-field",15)(32,"mat-label"),t._uU(33,"Minutes"),t.qZA(),t._UZ(34,"input",16),t.qZA(),t.TgZ(35,"mat-form-field",17)(36,"mat-label"),t._uU(37,"Secs"),t.qZA(),t._UZ(38,"input",18),t.qZA()(),t.TgZ(39,"mat-form-field",4)(40,"mat-label"),t._uU(41,"Activity Date"),t.qZA(),t._UZ(42,"input",19)(43,"mat-datepicker-toggle",20)(44,"mat-datepicker",null,21),t.TgZ(46,"mat-error"),t._uU(47," Date is requied "),t.qZA(),t.TgZ(48,"mat-hint",22),t._uU(49,"MM/DD/YYYY"),t.qZA()(),t.YNc(50,N,6,1,"div",23),t.TgZ(51,"div",24)(52,"button",25),t.NdJ("click",function(){return c.add()}),t._uU(53,"Add Activity"),t.qZA()()()()()(),t._UZ(54,"training-buddy-navbar")}if(2&e){const l=t.MAs(45);t.xp6(4),t.Q6J("formGroup",c.manualForm),t.xp6(38),t.Q6J("matDatepicker",l),t.xp6(1),t.Q6J("for",l),t.xp6(5),t.Q6J("align","end"),t.xp6(2),t.Q6J("ngIf",!c.isWeightLifting)}},directives:[d.p,m.Il,g.a8,g.dn,n._Y,n.JL,n.sg,f.KE,f.hX,n.Fj,p.Nt,n.JJ,n.u,f.TO,s.gD,A.ey,n.wV,k.hl,k.nW,f.R9,k.Mq,f.bx,y.O5,D.lW,P.S],styles:["mat-card[_ngcontent-%COMP%]{max-width:400px;width:90vw;margin:2em auto;padding:2em auto;position:absolute;top:50%;left:50%;transform:translate(-50%);background-color:#fff}.text-center[_ngcontent-%COMP%]{text-align:center}.submitButton[_ngcontent-%COMP%]{text-align:center;width:100%}.forgotpassword[_ngcontent-%COMP%]{text-align:right;text-decoration:underline}mat-form-field[_ngcontent-%COMP%]{display:block}#signup[_ngcontent-%COMP%]{width:100%;background-color:#1b1a1b!important}.logIn[_ngcontent-%COMP%]{text-align:right;margin-top:1%;display:flex;flex-direction:row;justify-content:flex-end}.logInLink[_ngcontent-%COMP%]{text-decoration:underline;color:#4350af;margin-left:1%}.logInLink[_ngcontent-%COMP%]:hover{cursor:pointer}  .mat-form-field-wrapper{margin-bottom:-1.25em}.row[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end}.b[_ngcontent-%COMP%]{color:#4285f4}.r[_ngcontent-%COMP%]{color:#ea4335}.y[_ngcontent-%COMP%]{color:#fbbc05}.g[_ngcontent-%COMP%]{color:#34a853}p[_ngcontent-%COMP%]{font-size:12px!important}.fullhint[_ngcontent-%COMP%]{width:100%!important}#background[_ngcontent-%COMP%]{height:100vh!important;background-size:cover;background-repeat:no-repeat}mat-error[_ngcontent-%COMP%]{text-align:right}mat-hint[_ngcontent-%COMP%]{text-align:right!important}"]}),i})()}];let L=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[M.Bz.forChild(S)],M.Bz]}),i})(),E=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[r.N],imports:[[y.ez,b.W,L,n.UX]]}),i})()},2160:(F,x,o)=>{o.d(x,{N:()=>M});var y=o(5e3),b=o(9808);let M=(()=>{class n{constructor(t,a){this.document=t,this.platformId=a,this.documentIsAccessible=(0,b.NF)(this.platformId)}static getCookieRegExp(t){const a=t.replace(/([\[\]\{\}\(\)\|\=\;\+\?\,\.\*\^\$])/gi,"\\$1");return new RegExp("(?:^"+a+"|;\\s*"+a+")=(.*?)(?:;|$)","g")}static safeDecodeURIComponent(t){try{return decodeURIComponent(t)}catch(a){return t}}check(t){return!!this.documentIsAccessible&&(t=encodeURIComponent(t),n.getCookieRegExp(t).test(this.document.cookie))}get(t){if(this.documentIsAccessible&&this.check(t)){t=encodeURIComponent(t);const r=n.getCookieRegExp(t).exec(this.document.cookie);return r[1]?n.safeDecodeURIComponent(r[1]):""}return""}getAll(){if(!this.documentIsAccessible)return{};const t={},a=this.document;return a.cookie&&""!==a.cookie&&a.cookie.split(";").forEach(r=>{const[d,m]=r.split("=");t[n.safeDecodeURIComponent(d.replace(/^ /,""))]=n.safeDecodeURIComponent(m)}),t}set(t,a,r,d,m,g,f){if(!this.documentIsAccessible)return;if("number"==typeof r||r instanceof Date||d||m||g||f)return void this.set(t,a,{expires:r,path:d,domain:m,secure:g,sameSite:f||"Lax"});let p=encodeURIComponent(t)+"="+encodeURIComponent(a)+";";const s=r||{};s.expires&&(p+="number"==typeof s.expires?"expires="+new Date((new Date).getTime()+1e3*s.expires*60*60*24).toUTCString()+";":"expires="+s.expires.toUTCString()+";"),s.path&&(p+="path="+s.path+";"),s.domain&&(p+="domain="+s.domain+";"),!1===s.secure&&"None"===s.sameSite&&(s.secure=!0,console.warn(`[ngx-cookie-service] Cookie ${t} was forced with secure flag because sameSite=None.More details : https://github.com/stevermeister/ngx-cookie-service/issues/86#issuecomment-597720130`)),s.secure&&(p+="secure;"),s.sameSite||(s.sameSite="Lax"),p+="sameSite="+s.sameSite+";",this.document.cookie=p}delete(t,a,r,d,m="Lax"){if(!this.documentIsAccessible)return;const g=new Date("Thu, 01 Jan 1970 00:00:01 GMT");this.set(t,"",{expires:g,path:a,domain:r,secure:d,sameSite:m})}deleteAll(t,a,r,d="Lax"){if(!this.documentIsAccessible)return;const m=this.getAll();for(const g in m)m.hasOwnProperty(g)&&this.delete(g,t,a,r,d)}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(b.K0),y.LFG(y.Lbi))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()}}]);