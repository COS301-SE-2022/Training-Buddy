"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[895],{1895:(M,T,l)=>{l.r(T),l.d(T,{ClientScheduleworkoutFeatureModule:()=>O});var Z=l(9808),x=l(5357),c=l(3075),h=l(9444),t=l(5e3),s=l(1271),a=l(2160),m=l(6971),_=l(3954),f=l(9224),g=l(7322),A=l(7531),k=l(623),d=l(4107),w=l(508),I=l(7423),U=l(987);function W(o,p){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Location is required "),t.qZA())}function D(o,p){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Distance is required "),t.qZA())}function N(o,p){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"mat-form-field",3)(2,"mat-label"),t._uU(3,"Distance (km)"),t.qZA(),t.TgZ(4,"input",24),t.NdJ("input",function(){return t.CHM(e),t.oxw().calculateDuration()}),t.qZA(),t.YNc(5,D,2,0,"mat-error",6),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(5),t.Q6J("ngIf",e.scheduleWorkout.controls.distance.errors)}}function q(o,p){1&o&&(t.TgZ(0,"mat-label"),t._uU(1,"Pace (min/km):"),t.qZA())}function R(o,p){1&o&&(t.TgZ(0,"mat-label"),t._uU(1,"Pace (min/100m):"),t.qZA())}function J(o,p){if(1&o){const e=t.EpF();t.TgZ(0,"div"),t.YNc(1,q,2,0,"mat-label",6),t.YNc(2,R,2,0,"mat-label",6),t.TgZ(3,"div",25)(4,"mat-form-field",26)(5,"mat-label"),t._uU(6,"Minutes"),t.qZA(),t.TgZ(7,"input",27),t.NdJ("input",function(){return t.CHM(e),t.oxw().calculateDuration()})("ngModelChange",function(u){return t.CHM(e),t.oxw().mins=u}),t.qZA()(),t.TgZ(8,"mat-form-field",28)(9,"mat-label"),t._uU(10,"Secs"),t.qZA(),t.TgZ(11,"input",29),t.NdJ("input",function(){return t.CHM(e),t.oxw().calculateDuration()})("ngModelChange",function(u){return t.CHM(e),t.oxw().secs=u}),t.qZA()()()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.isRunning),t.xp6(1),t.Q6J("ngIf",e.isSwimming),t.xp6(5),t.Q6J("ngModel",e.mins),t.xp6(4),t.Q6J("ngModel",e.secs)}}function F(o,p){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"mat-form-field",26)(2,"mat-label"),t._uU(3,"Speed"),t.qZA(),t.TgZ(4,"input",30),t.NdJ("input",function(){return t.CHM(e),t.oxw().calculateDuration()}),t.qZA()()()}}function P(o,p){1&o&&(t.TgZ(0,"div")(1,"mat-label"),t._uU(2,"Activity Duration:"),t.qZA(),t.TgZ(3,"div",25)(4,"mat-form-field",31)(5,"mat-label"),t._uU(6,"Hours"),t.qZA(),t._UZ(7,"input",32),t.qZA(),t.TgZ(8,"mat-form-field",26)(9,"mat-label"),t._uU(10,"Minutes"),t.qZA(),t._UZ(11,"input",33),t.qZA()()())}function L(o,p){if(1&o&&(t.TgZ(0,"div",34)(1,"mat-hint"),t._uU(2),t.qZA()()),2&o){const e=t.oxw();t.xp6(2),t.hij("Approximate Duration: ",e.calculatedDuration,"")}}const E=[{path:"",component:(()=>{class o{constructor(e,n,u,r,i){this.builder=e,this.apollo=n,this.snackBar=u,this.cookieService=r,this.router=i,this.mins="5",this.secs="30",this.img="https://images.unsplash.com/photo-1512941675424-1c17dabfdddc?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2670&q=80",this.frmBuilder=e,this.setAllFalse(),this.isRunning=!0,this.calculatedDuration="",this.showCalculatedDuration=!1,this.email=r.get("email"),this.latitude=0,this.longitude=0,this.vicinity=""}setAllFalse(){this.isWeightLifting=!1,this.isRunning=!1,this.isSwimming=!1,this.isRiding=!1,this.showCalculatedDuration=!1}ngOnInit(){this.scheduleWorkout=this.frmBuilder.group({name:["Training Activity",[c.kI.required]],location:["",[c.kI.required]],type:["Running",[c.kI.required]],hours:["1",[c.kI.required]],minutes:["00",[c.kI.required,c.kI.max(59)]],seconds:["",[c.kI.required,c.kI.max(59)]],distance:["",[c.kI.required]],date:["",[c.kI.required]],kmph:["",[c.kI.required]]})}activityToggle(e){this.setAllFalse(),"run"==e&&(this.isRunning=!0,this.mins="5",this.secs="30"),"ride"==e&&(this.isRiding=!0),"swim"==e&&(this.isSwimming=!0,this.mins="2",this.secs="00"),"lift"==e&&(this.isWeightLifting=!0,this.mins="1",this.secs="00"),this.calculateDuration()}queryActivitySchedule(e,n,u,r,i,v){this.apollo.mutate({mutation:h.Ps`
        mutation{
        activitySchedule(ActivitySchedule:{
          title: "${e}",
          email: "${this.email}",
          time: "${n}",
          activity: "${u}",
          location: "${r}",
          distance: "${i}",
          duration: "${v}",
        }){
          message
        }
      }
    `}).subscribe({next:C=>{this.router.navigate(["/schedule"])}})}add(){const e=this.scheduleWorkout.controls.type.value||!1,n=this.scheduleWorkout.controls.location.value||!1,u=this.scheduleWorkout.controls.name.value||!1;let r=this.scheduleWorkout.controls.hours.value||!1,i=this.scheduleWorkout.controls.minutes.value||!1;const v=this.scheduleWorkout.controls.seconds.value||!1,C=this.scheduleWorkout.controls.date.value||!1,B=this.scheduleWorkout.controls.kmph.value||!1,b=this.scheduleWorkout.controls.distance.value||!1,Q=new Date(C).getTime(),y=Math.trunc(Q/1e3).toString();1==r.length&&(r="0"+r),1==i.length&&(i="0"+i);const S=r+":"+i;if(console.log(S),u&&e&&C){if(this.isWeightLifting){if(!r&&!i)return;return this.queryActivitySchedule(u,y,e,n,"N/A",S),void this.resetForm()}if(b){if(this.isRiding){if(!B)return;return this.queryActivitySchedule(u,y,e,n,b,S),void this.resetForm()}!i&&!v||(this.isRunning&&this.queryActivitySchedule(u,y,e,n,b,S),this.isSwimming&&this.queryActivitySchedule(u,y,e,n,b,S),n&&this.resetForm())}}}resetForm(){this.scheduleWorkout.reset();for(const e in this.scheduleWorkout.controls)this.scheduleWorkout.controls[e].setErrors(null)}calulateSeconds(e,n,u){return 60*e*60+60*n+u}calculateSpeed(e,n){return n/e}calculateDuration(){if(this.showCalculatedDuration=!1,this.isWeightLifting)return this.calculatedDuration="",void(this.showCalculatedDuration=!1);if(""!=this.scheduleWorkout.controls.distance.value&&null!=this.scheduleWorkout.controls.distance.value){if(this.isRiding){if(""==this.scheduleWorkout.controls.kmph.value||null==this.scheduleWorkout.controls.kmph.value)return;let u=60*this.scheduleWorkout.controls.distance.value/this.scheduleWorkout.controls.kmph.value,r=0;for(;u>=60;)r++,u-=60;const i=u;return this.calculatedDuration=0==r?`${i} mins`:`${r} hours ${i} mins`,void(this.showCalculatedDuration=!0)}if(""!=this.scheduleWorkout.controls.minutes.value&&null!=this.scheduleWorkout.controls.minutes.value&&(""!=this.scheduleWorkout.controls.seconds.value||"00"==this.scheduleWorkout.controls.seconds.value)){if(this.scheduleWorkout.controls.minutes.value>59&&(this.mins="59"),this.scheduleWorkout.controls.seconds.value>59&&(this.secs="59"),this.isRunning){const n=this.scheduleWorkout.controls.seconds.value,u=Number(60*this.scheduleWorkout.controls.minutes.value)+Number(n);let i=Number(this.scheduleWorkout.controls.distance.value)*Number(u);i/=60;let v=0;for(;i>=60;)v++,i-=60;const C=i;this.calculatedDuration=0==v?`${C} mins`:`${v} hours ${Math.round(C)} mins`}if(this.isSwimming){const n=this.scheduleWorkout.controls.seconds.value,u=this.scheduleWorkout.controls.distance.value,r=10*(Number(60*this.scheduleWorkout.controls.minutes.value)+Number(n));let i=Number(r)*Number(u);i/=60;let v=0;for(;i>=60;)v++,i-=60;const C=i;this.calculatedDuration=0==v?`${C} mins`:`${v} hours ${Math.round(C)} mins`}this.showCalculatedDuration=!0}}}onAutocompleteSelected(e){this.vicinity=e.vicinity}onLocationSelected(e){null!=e&&(this.latitude=e.latitude,this.longitude=e.longitude)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(c.qu),t.Y36(h._M),t.Y36(s.ux),t.Y36(a.N),t.Y36(x.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["training-buddy-schedule-workout"]],decls:64,vars:8,consts:[["title","Schedule workout"],["cols","1","rows","1","rowHeight","2:1"],[3,"formGroup"],["appearance","outline"],["formControlName","name","id","name","matInput","","type","text","placeholder","","name","name"],["formControlName","location","matInput","","matGoogleMapsAutocomplete","",3,"onAutocompleteSelected","onLocationSelected"],[4,"ngIf"],[1,"fullhint"],[1,"row","pBy"],[1,"b"],[1,"r"],[1,"y"],[1,"g"],["formControlName","type","id","type","name","type",3,"selectionChange"],["toggle",""],["value","run","default",""],["value","ride"],["value","swim"],["value","lift"],["formControlName","date","id","date","matInput","","type","datetime-local"],[3,"align"],["class","text-center",4,"ngIf"],[1,"submitButton","mt-3"],["id","submit","mat-raised-button","","color","primary",1,"text-center","ml-1",3,"click"],["formControlName","distance","id","distance","matInput","","type","number","placeholder","5","name","distance",3,"input"],[1,"grid","grid-flow-row-dense","grid-cols-2","mt-2"],["appearance","outline",1,"col-span-1"],["formControlName","minutes","id","minutes","matInput","","type","number","name","minutes",3,"ngModel","input","ngModelChange"],["appearance","outline",1,"col-span-1","ml-1"],["formControlName","seconds","id","seconds","matInput","","type","number","name","seconds",3,"ngModel","input","ngModelChange"],["formControlName","kmph","id","kmph","matInput","","type","number","placeholder","km/h","name","kmph",3,"input"],["appearance","outline",1,"col-span-1","mr-1"],["formControlName","hours","id","hours","matInput","","type","number","name","hours"],["formControlName","minutes","id","minutes","matInput","","type","number","name","minutes"],[1,"text-center"]],template:function(e,n){if(1&e){const u=t.EpF();t._UZ(0,"training-buddy-back-navbar",0),t.TgZ(1,"mat-grid-list",1)(2,"mat-card")(3,"mat-card-content")(4,"form",2)(5,"mat-form-field",3)(6,"mat-label"),t._uU(7,"Activity Name"),t.qZA(),t._UZ(8,"input",4),t.TgZ(9,"mat-error"),t._uU(10," Name is required "),t.qZA()(),t.TgZ(11,"mat-form-field",3)(12,"mat-label"),t._uU(13,"Location"),t.qZA(),t.TgZ(14,"input",5),t.NdJ("onAutocompleteSelected",function(i){return n.onAutocompleteSelected(i)})("onLocationSelected",function(i){return n.onLocationSelected(i)}),t.qZA(),t.YNc(15,W,2,0,"mat-error",6),t.TgZ(16,"mat-hint",7)(17,"div")(18,"div",8)(19,"p"),t._uU(20,"powered by"),t.qZA(),t._uU(21,"\xa0"),t.TgZ(22,"p",9),t._uU(23,"G"),t.qZA(),t.TgZ(24,"p",10),t._uU(25,"o"),t.qZA(),t.TgZ(26,"p",11),t._uU(27,"o"),t.qZA(),t.TgZ(28,"p",9),t._uU(29,"g"),t.qZA(),t.TgZ(30,"p",12),t._uU(31,"l"),t.qZA(),t.TgZ(32,"p",10),t._uU(33,"e"),t.qZA()()()()(),t.TgZ(34,"mat-form-field",3)(35,"mat-label"),t._uU(36,"Activity Type"),t.qZA(),t.TgZ(37,"mat-select",13,14),t.NdJ("selectionChange",function(){t.CHM(u);const i=t.MAs(38);return n.activityToggle(i.value)}),t.TgZ(39,"mat-option",15),t._uU(40,"Run"),t.qZA(),t.TgZ(41,"mat-option",16),t._uU(42,"Ride"),t.qZA(),t.TgZ(43,"mat-option",17),t._uU(44,"Swim"),t.qZA(),t.TgZ(45,"mat-option",18),t._uU(46,"Gym"),t.qZA()()(),t.TgZ(47,"mat-form-field",3)(48,"mat-label"),t._uU(49,"Activity Start"),t.qZA(),t._UZ(50,"input",19),t.TgZ(51,"mat-error"),t._uU(52," Date is requied "),t.qZA(),t.TgZ(53,"mat-hint",20),t._uU(54,"MM/DD/YYYY"),t.qZA()(),t.YNc(55,N,6,1,"div",6),t.YNc(56,J,12,4,"div",6),t.YNc(57,F,5,0,"div",6),t.YNc(58,P,12,0,"div",6),t.YNc(59,L,3,1,"div",21),t.TgZ(60,"div",22)(61,"button",23),t.NdJ("click",function(){return n.add()}),t._uU(62,"Add"),t.qZA()()()()()(),t._UZ(63,"training-buddy-navbar")}2&e&&(t.xp6(4),t.Q6J("formGroup",n.scheduleWorkout),t.xp6(11),t.Q6J("ngIf",n.scheduleWorkout.controls.location.errors),t.xp6(38),t.Q6J("align","end"),t.xp6(2),t.Q6J("ngIf",!n.isWeightLifting),t.xp6(1),t.Q6J("ngIf",n.isRunning||n.isSwimming),t.xp6(1),t.Q6J("ngIf",n.isRiding),t.xp6(1),t.Q6J("ngIf",n.isWeightLifting),t.xp6(1),t.Q6J("ngIf",!n.isWeightLifting&&n.showCalculatedDuration))},directives:[m.p,_.Il,f.a8,f.dn,c._Y,c.JL,c.sg,g.KE,g.hX,c.Fj,A.Nt,c.JJ,c.u,g.TO,k.QT,Z.O5,g.bx,d.gD,w.ey,c.wV,I.lW,U.S],styles:["mat-card[_ngcontent-%COMP%]{max-width:400px;width:90vw;margin:2em auto;padding:2em auto;position:absolute;top:50%;left:50%;transform:translate(-50%);background-color:#fff}.b[_ngcontent-%COMP%]{color:#4285f4}.r[_ngcontent-%COMP%]{color:#ea4335}.y[_ngcontent-%COMP%]{color:#fbbc05}.g[_ngcontent-%COMP%]{color:#34a853}.text-center[_ngcontent-%COMP%]{text-align:center}.submitButton[_ngcontent-%COMP%]{text-align:center;width:100%}mat-form-field[_ngcontent-%COMP%]{display:block}#submit[_ngcontent-%COMP%]{width:100%;background-color:#1b1a1b!important}  .mat-form-field-wrapper{margin-bottom:-1.25em}.row[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end}p[_ngcontent-%COMP%]{font-size:12px!important}.fullhint[_ngcontent-%COMP%]{width:100%!important}#background[_ngcontent-%COMP%]{height:100vh!important;background-size:cover;background-repeat:no-repeat}mat-error[_ngcontent-%COMP%]{text-align:right}mat-hint[_ngcontent-%COMP%]{text-align:right!important}"]}),o})()}];let Y=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[x.Bz.forChild(E)],x.Bz]}),o})();var $=l(7918);let O=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[a.N],imports:[[Z.ez,Y,$.W,k.Sr,c.UX.withConfig({warnOnNgModelWithFormControl:"never"})]]}),o})()},2160:(M,T,l)=>{l.d(T,{N:()=>c});var Z=l(5e3),x=l(9808);let c=(()=>{class h{constructor(s,a){this.document=s,this.platformId=a,this.documentIsAccessible=(0,x.NF)(this.platformId)}static getCookieRegExp(s){const a=s.replace(/([\[\]\{\}\(\)\|\=\;\+\?\,\.\*\^\$])/gi,"\\$1");return new RegExp("(?:^"+a+"|;\\s*"+a+")=(.*?)(?:;|$)","g")}static safeDecodeURIComponent(s){try{return decodeURIComponent(s)}catch(a){return s}}check(s){return!!this.documentIsAccessible&&(s=encodeURIComponent(s),h.getCookieRegExp(s).test(this.document.cookie))}get(s){if(this.documentIsAccessible&&this.check(s)){s=encodeURIComponent(s);const m=h.getCookieRegExp(s).exec(this.document.cookie);return m[1]?h.safeDecodeURIComponent(m[1]):""}return""}getAll(){if(!this.documentIsAccessible)return{};const s={},a=this.document;return a.cookie&&""!==a.cookie&&a.cookie.split(";").forEach(m=>{const[_,f]=m.split("=");s[h.safeDecodeURIComponent(_.replace(/^ /,""))]=h.safeDecodeURIComponent(f)}),s}set(s,a,m,_,f,g,A){if(!this.documentIsAccessible)return;if("number"==typeof m||m instanceof Date||_||f||g||A)return void this.set(s,a,{expires:m,path:_,domain:f,secure:g,sameSite:A||"Lax"});let k=encodeURIComponent(s)+"="+encodeURIComponent(a)+";";const d=m||{};d.expires&&(k+="number"==typeof d.expires?"expires="+new Date((new Date).getTime()+1e3*d.expires*60*60*24).toUTCString()+";":"expires="+d.expires.toUTCString()+";"),d.path&&(k+="path="+d.path+";"),d.domain&&(k+="domain="+d.domain+";"),!1===d.secure&&"None"===d.sameSite&&(d.secure=!0,console.warn(`[ngx-cookie-service] Cookie ${s} was forced with secure flag because sameSite=None.More details : https://github.com/stevermeister/ngx-cookie-service/issues/86#issuecomment-597720130`)),d.secure&&(k+="secure;"),d.sameSite||(d.sameSite="Lax"),k+="sameSite="+d.sameSite+";",this.document.cookie=k}delete(s,a,m,_,f="Lax"){if(!this.documentIsAccessible)return;const g=new Date("Thu, 01 Jan 1970 00:00:01 GMT");this.set(s,"",{expires:g,path:a,domain:m,secure:_,sameSite:f})}deleteAll(s,a,m,_="Lax"){if(!this.documentIsAccessible)return;const f=this.getAll();for(const g in f)f.hasOwnProperty(g)&&this.delete(g,s,a,m,_)}}return h.\u0275fac=function(s){return new(s||h)(Z.LFG(x.K0),Z.LFG(Z.Lbi))},h.\u0275prov=Z.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})()}}]);