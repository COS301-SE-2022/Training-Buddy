"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[93],{1093:(Zt,k,c)=>{c.r(k),c.d(k,{ClientScheduleFeatureModule:()=>kt});var m=c(9808),h=c(5357),u=c(1777),d=c(9444),t=c(5e3),v=c(2160),I=c(5436),f=c(773),w=c(5245),Z=c(7423),x=c(7322),b=c(987);function A(n,s){1&n&&(t.TgZ(0,"div",2),t._UZ(1,"mat-spinner"),t.qZA())}function q(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",13),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(4).fullWorkoutDetails(null==r?null:r.id)}),t.TgZ(1,"div",14),t._UZ(2,"img",15),t.TgZ(3,"div",16)(4,"p",17),t._uU(5),t.qZA(),t.TgZ(6,"div",18)(7,"mat-icon"),t._uU(8,"access_time"),t.qZA(),t._uU(9),t.qZA(),t.TgZ(10,"div",18)(11,"mat-icon"),t._uU(12,"location_on"),t.qZA(),t._uU(13),t.qZA(),t.TgZ(14,"div",19)(15,"div",20)(16,"button",21),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(4).acceptInvite(null==r?null:r.organiser,null==r?null:r.id)}),t._uU(17,"Accept"),t.qZA()(),t.TgZ(18,"div",22)(19,"button",21),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(4).rejectInvite(null==r?null:r.organiser,null==r?null:r.id)}),t._uU(20,"Decline"),t.qZA()()()()()()}if(2&n){const e=s.$implicit;t.xp6(2),t.Q6J("src",null==e?null:e.image,t.LSH),t.xp6(3),t.Oqu(null==e?null:e.name),t.xp6(4),t.hij(" ",null==e?null:e.startDate.time," "),t.xp6(4),t.hij(" ",null==e?null:e.startPoint," ")}}function U(n,s){if(1&n&&(t.TgZ(0,"div")(1,"div",10)(2,"h2"),t._uU(3),t.qZA()(),t.YNc(4,q,21,4,"div",12),t.qZA()),2&n){const e=s.$implicit;t.xp6(3),t.AsE(" ",null==e[0]?null:e[0].startDate.day," ",null==e[0]?null:e[0].startDate.month," "),t.xp6(1),t.Q6J("ngForOf",e)}}function O(n,s){if(1&n&&(t.TgZ(0,"div",3)(1,"h2",10),t._uU(2," You have been invited "),t.qZA(),t.YNc(3,U,5,3,"div",11),t.qZA()),2&n){const e=t.oxw(2);t.xp6(3),t.Q6J("ngForOf",e.workoutInvites)}}function D(n,s){1&n&&(t.ynx(0),t._UZ(1,"hr",23),t.BQk()),2&n&&(t.xp6(1),t.Q6J("@swipeLeft",void 0))}function N(n,s){1&n&&(t.ynx(0),t._UZ(1,"hr",24),t.BQk())}function M(n,s){1&n&&(t.ynx(0),t._UZ(1,"hr",24),t.BQk())}function P(n,s){1&n&&(t.ynx(0),t._UZ(1,"hr",23),t.BQk()),2&n&&(t.xp6(1),t.Q6J("@swipeRight",void 0))}function J(n,s){1&n&&(t.TgZ(0,"div",26)(1,"mat-hint",10),t._uU(2,"No workouts scheduled"),t.qZA()())}function W(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",28),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(5).fullWorkoutDetails(null==r?null:r.id)}),t.TgZ(1,"div",14),t._UZ(2,"img",15),t.TgZ(3,"div",16)(4,"p",17),t._uU(5),t.qZA(),t.TgZ(6,"div",18)(7,"mat-icon"),t._uU(8,"access_time"),t.qZA(),t._uU(9),t.qZA(),t.TgZ(10,"div",18)(11,"mat-icon"),t._uU(12,"location_on"),t.qZA(),t._uU(13),t.qZA()()()()}if(2&n){const e=s.$implicit;t.xp6(2),t.Q6J("src",null==e?null:e.image,t.LSH),t.xp6(3),t.Oqu(null==e?null:e.name),t.xp6(4),t.hij(" ",null==e?null:e.startDate.time," "),t.xp6(4),t.hij(" ",null==e?null:e.startPoint," ")}}function Y(n,s){if(1&n&&(t.TgZ(0,"div")(1,"div",10)(2,"h2"),t._uU(3),t.qZA()(),t.YNc(4,W,14,4,"div",27),t.qZA()),2&n){const e=s.$implicit;t.xp6(3),t.lnq(" ",null==e[0]?null:e[0].startDate.day," ",null==e[0]?null:e[0].startDate.month," ",null==e[0]?null:e[0].startDate.year," "),t.xp6(1),t.Q6J("ngForOf",e)}}function $(n,s){if(1&n&&(t.TgZ(0,"div",3),t.YNc(1,Y,5,4,"div",11),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",e.workouts)}}function S(n,s){if(1&n&&(t.ynx(0),t.YNc(1,J,3,0,"div",25),t.YNc(2,$,2,1,"div",1),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!e.upcomingEvents),t.xp6(1),t.Q6J("ngIf",e.upcomingEvents)}}function R(n,s){1&n&&(t.TgZ(0,"div",26)(1,"mat-hint",10),t._uU(2,"Workouts you finish will apear here."),t.qZA()())}function Q(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",28),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(5).fullWorkoutDetails(null==r?null:r.id)}),t.TgZ(1,"div",14),t._UZ(2,"img",15),t.TgZ(3,"div",16)(4,"p",17),t._uU(5),t.qZA(),t.TgZ(6,"div",18)(7,"mat-icon"),t._uU(8,"access_time"),t.qZA(),t._uU(9),t.qZA(),t.TgZ(10,"div",18)(11,"mat-icon"),t._uU(12,"location_on"),t.qZA(),t._uU(13),t.qZA()()()()}if(2&n){const e=s.$implicit;t.xp6(2),t.Q6J("src",null==e?null:e.image,t.LSH),t.xp6(3),t.Oqu(null==e?null:e.name),t.xp6(4),t.hij(" ",null==e?null:e.startDate.time," "),t.xp6(4),t.hij(" ",null==e?null:e.startPoint," ")}}function F(n,s){if(1&n&&(t.TgZ(0,"div")(1,"div",10)(2,"h2"),t._uU(3),t.qZA()(),t.YNc(4,Q,14,4,"div",27),t.qZA()),2&n){const e=s.$implicit;t.xp6(3),t.lnq(" ",null==e[0]?null:e[0].startDate.day," ",null==e[0]?null:e[0].startDate.month," ",null==e[0]?null:e[0].startDate.year," "),t.xp6(1),t.Q6J("ngForOf",e)}}function H(n,s){if(1&n&&(t.TgZ(0,"div",3),t.YNc(1,F,5,4,"div",11),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",e.workoutHistory)}}function E(n,s){if(1&n&&(t.ynx(0),t.YNc(1,R,3,0,"div",25),t.YNc(2,H,2,1,"div",1),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!e.pastEvents),t.xp6(1),t.Q6J("ngIf",e.pastEvents)}}const V=function(){return["../scheduleworkout"]};function j(n,s){1&n&&(t.TgZ(0,"div")(1,"button",29)(2,"mat-icon"),t._uU(3,"add"),t.qZA()()()),2&n&&(t.xp6(1),t.Q6J("routerLink",t.DdM(1,V)))}function B(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",3),t.YNc(1,O,4,1,"div",1),t.TgZ(2,"div",4)(3,"div",5)(4,"h4",6,7),t.NdJ("click",function(){return t.CHM(e),t.oxw().toggleUpcomingWorkouts()}),t._uU(6,"Upcoming workouts"),t.qZA(),t.YNc(7,D,2,1,"ng-container",8),t.YNc(8,N,2,0,"ng-container",8),t.qZA(),t.TgZ(9,"div",5)(10,"h4",6,9),t.NdJ("click",function(){return t.CHM(e),t.oxw().toggleWorkoutHistory()}),t._uU(12,"History"),t.qZA(),t.YNc(13,M,2,0,"ng-container",8),t.YNc(14,P,2,1,"ng-container",8),t.qZA()(),t.YNc(15,S,3,2,"ng-container",8),t.YNc(16,E,3,2,"ng-container",8),t.YNc(17,j,4,2,"div",8),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.invitesAvailable),t.xp6(6),t.Q6J("ngIf",e.toggle),t.xp6(1),t.Q6J("ngIf",!e.toggle),t.xp6(5),t.Q6J("ngIf",e.toggle),t.xp6(1),t.Q6J("ngIf",!e.toggle),t.xp6(1),t.Q6J("ngIf",e.toggle),t.xp6(1),t.Q6J("ngIf",!e.toggle),t.xp6(1),t.Q6J("ngIf",e.toggle)}}let L=(()=>{class n{constructor(e,i,o,r,a){this.apollo=e,this.cookie=i,this.activated=o,this.router=r,this.cookieService=a,this.upcomingEvents=!1,this.pastEvents=!1,this.loading=!0,this.invitesAvailable=!1,this.workoutsLoaded=!1,this.workoutsCount=0,this.toggle=!0,this.email=this.cookieService.get("email")}ngOnInit(){this.getData(this.email)}getWorkouts(e){return this.apollo.query({query:d.Ps`
        query{
          getScheduleWorkout(email: "${e}"){
            title,
            id,
            startTime,
            activityType,
            startPoint,
            proposedDistance,
            proposedDuration
            }
        }`})}getWorkoutHistory(e){return this.apollo.query({query:d.Ps`
        query{
          getWorkoutHistory(email: "${e}"){
            title,
            id,
            startTime,
            activityType,
            startPoint,
            proposedDistance,
            proposedDuration
            }
        }`})}getInvites(e){return this.apollo.query({query:d.Ps`
        query{
          getIncomingInvites(email: "${e}"){
            sender,
            receivers,
            workout{
              title,
              id,
              startTime,
              organiser,
              participants{
                userName,
                userSurname,
                location,
                longitude,
                latitude,
                stravaToken,
                dob,
                gender,
                email,
                cellNumber,
                id,
                bio,
                metrics{
                  lift,
                  run,
                  swim,
                  ride
                },
                buddies,
                distance
              }
              activityType,
              startPoint,
              proposedDistance,
              proposedDuration
            }
          }
        }
      `})}getUserName(e){return this.apollo.query({query:d.Ps`
        query{
          getOne(email: "${e}"){
            userName
          }
        }`})}getData(e){this.getInvites(e).subscribe({next:i=>{const o=[];if(i.data.getIncomingInvites.map(l=>{o.push(this.convertInvitedToCard(l))}),0==o.length)return;o.sort(function(l,p){return l.startDate.timestamp-p.startDate.timestamp});const r=[[]];let a=0,g=o[0].startDate.day;for(let l=0;l<o.length;l++)o[l].startDate.day==g||(g=o[l].startDate.day,a++,r.push([])),r[a].push(o[l]);this.workoutInvites=r,0!=this.workoutInvites.length&&(this.invitesAvailable=!0)}}),this.getWorkouts(e).subscribe({next:i=>{const o=[];if(i.data.getScheduleWorkout.map(r=>{o.push(this.convertWorkoutToCard(r))}),0!=o.length){o.sort(function(l,p){return l.startDate.timestamp-p.startDate.timestamp});const r=[[]];let a=0,g=o[0].startDate.day;for(let l=0;l<o.length;l++)o[l].startDate.day==g||(g=o[l].startDate.day,a++,r.push([])),r[a].push(o[l]);this.workouts=r,this.workoutsLoaded=!0,this.workoutsCount=this.workouts.length,0!=this.workoutsCount&&(this.upcomingEvents=!0)}this.loading=!1}}),this.getWorkoutHistory(e).subscribe({next:i=>{const o=[];if(i.data.getWorkoutHistory.map(r=>{o.push(this.convertWorkoutToCard(r))}),0!=o.length){o.sort(function(l,p){return p.startDate.timestamp-l.startDate.timestamp});const r=[[]];let a=0,g=o[0].startDate.day;for(let l=0;l<o.length;l++)o[l].startDate.day==g||(g=o[l].startDate.day,a++,r.push([])),r[a].push(o[l]);this.workoutHistory=r,0!=this.workoutHistory.length&&(this.pastEvents=!0)}this.loading=!1}})}convertInvitedToCard(e){return{organiser:e.sender,name:e.workout.title,id:e.workout.id,startPoint:e.workout.startPoint,startDate:this.startDateTime(e.workout.startTime),image:this.image(e.workout.activityType)}}convertWorkoutToCard(e){return{name:e.title,id:e.id,startPoint:e.startPoint,startDate:this.startDateTime(e.startTime),image:this.image(e.activityType)}}startDateTime(e){const i=new Date(1e3*Number(e)),r=new m.uU("en-US").transform(i,"HH:mm");return{timestamp:e,day:i.getDate(),month:["January","February","March","April","May","June","July","August","September","October","November","December"][i.getMonth()],year:i.getFullYear(),time:r}}image(e){return"run"==e?"https://img.icons8.com/ios/50/000000/running.png":"ride"==e?"https://img.icons8.com/ios-filled/50/000000/bicycle.png":"swim"==e?"https://img.icons8.com/ios/50/000000/swimming.png":"https://img.icons8.com/ios/50/000000/dumbbell--v1.png"}fullWorkoutDetails(e){this.router.navigate([`schedule/${e}`])}acceptInvite(e,i){this.apollo.mutate({mutation:d.Ps`
        mutation{
          acceptInvite(
            email: "${this.email}",
            sender: "${e}",
            workoutID: "${i}"
          ){
          message
          }
      }
    `}).subscribe({next:()=>{this.workoutInvites.map((o,r)=>{o.organiserEmail==e&&this.workoutInvites.splice(r,1)})}}),this.workoutInvites.map((o,r)=>{o[0].organiserEmail==e&&this.workoutInvites.splice(r,1)})}rejectInvite(e,i){this.apollo.mutate({mutation:d.Ps`
        mutation{
          rejectInvite(
            email: "${this.email}",
            sender: "${e}",
            workoutID: "${i}"
          ){
          message
          }
      }
    `}).subscribe({next:()=>{this.workoutInvites.map((o,r)=>{o.organiserEmail==e&&this.workoutInvites.splice(r,1)})}}),this.workoutInvites.map((o,r)=>{o[0].organiserEmail==e&&this.workoutInvites.splice(r,1)})}toggleUpcomingWorkouts(){this.toggle=!0}toggleWorkoutHistory(){this.toggle=!1}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d._M),t.Y36(v.N),t.Y36(h.gz),t.Y36(h.F0),t.Y36(v.N))},n.\u0275cmp=t.Xpm({type:n,selectors:[["training-buddy-view-schedule"]],decls:4,vars:2,consts:[["class","spinner","id","pagespinner",4,"ngIf"],["class","px-4",4,"ngIf"],["id","pagespinner",1,"spinner"],[1,"px-4"],[1,"row","space-around","mt-5"],[1,"fullwidth","text-center"],[1,"link",3,"click"],["toggleCurrentWorkouts",""],[4,"ngIf"],["togglWorkoutHistory",""],[1,"text-center"],[4,"ngFor","ngForOf"],["class","px-4 py-16 mx-auto my-4 bg-white hover:scale-105 ease-in duration-200 rounded-xl shadow-md shadow-sky-700 p-[0px] pb-[4px] m-[0px] pt-[4px] shadow- sm:max-w-xl sm:py-14 md:max-w-full md:px-24 md:p-[3px] lg:max-w-screen-xl lg:px-8",3,"click",4,"ngFor","ngForOf"],[1,"px-4","py-16","mx-auto","my-4","bg-white","hover:scale-105","ease-in","duration-200","rounded-xl","shadow-md","shadow-sky-700","p-[0px]","pb-[4px]","m-[0px]","pt-[4px]","shadow-","sm:max-w-xl","sm:py-14","md:max-w-full","md:px-24","md:p-[3px]","lg:max-w-screen-xl","lg:px-8",3,"click"],[1,"flex","p-[0px]","m-[0px]","mb-2"],["alt","No alt",1,"my-auto","object-scale-down","w-20","h-20","mr-4","rounded-full","shadow","bg-white","border-4","border-sky-200","border-x-sky-500",3,"src"],[1,"flex","flex-col","justify-center","w-full"],[1,"text-lg","font-bold","text-slate-900","dark:text-slate-800","text-left"],[1,"with-icon"],[1,"grid","grid-cols-2","mt-2"],[1,"flex","request-buttons"],["mat-raised-button","",1,"bg-sky-500","hover:bg-sky-700","text-white",3,"click"],[1,"flex","request-buttons","flex-end"],[1,"hrdark","animation-perform"],[1,"hrlight","animation-perform"],["class","my-6",4,"ngIf"],[1,"my-6"],["class","px-4 py-16 mx-auto my-4 bg-white rounded-xl shadow-md shadow-sky-700 p-[0px] pb-[4px] m-[0px] pt-[4px] shadow- sm:max-w-xl sm:py-14 md:max-w-full md:px-24 md:p-[3px] lg:max-w-screen-xl lg:px-8  hover:scale-105 ease-in duration-200",3,"click",4,"ngFor","ngForOf"],[1,"px-4","py-16","mx-auto","my-4","bg-white","rounded-xl","shadow-md","shadow-sky-700","p-[0px]","pb-[4px]","m-[0px]","pt-[4px]","shadow-","sm:max-w-xl","sm:py-14","md:max-w-full","md:px-24","md:p-[3px]","lg:max-w-screen-xl","lg:px-8","hover:scale-105","ease-in","duration-200",3,"click"],["id","addbutton","mat-fab","",3,"routerLink"]],template:function(e,i){1&e&&(t._UZ(0,"training-buddy-unsigned-navbar"),t.YNc(1,A,2,0,"div",0),t.YNc(2,B,18,8,"div",1),t._UZ(3,"training-buddy-navbar")),2&e&&(t.xp6(1),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},directives:[I.B,m.O5,f.Ou,m.sg,w.Hw,Z.lW,x.bx,h.rH,b.S],styles:["#addbutton[_ngcontent-%COMP%]{background-color:#0284c7!important;position:fixed;top:85%;left:80%}#addbutton[_ngcontent-%COMP%]:hover{background-color:#0369a1!important}.text-center[_ngcontent-%COMP%]{text-align:center}#pagespinner[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.eventpic[_ngcontent-%COMP%]{background-color:#1b1a1b13;height:50px;width:50px;border-radius:50%;background-size:80%;background-position:center;background-repeat:no-repeat;margin-bottom:5%!important}mat-form-field[_ngcontent-%COMP%]{display:block}.spinner[_ngcontent-%COMP%]     .mat-progress-spinner circle, .mat-spinner[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{stroke:#0284c7!important}mat-spinner[_ngcontent-%COMP%]{margin:auto}h2[_ngcontent-%COMP%]{margin-bottom:0%!important}.row[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.space-between[_ngcontent-%COMP%]{justify-content:space-between}.align-content[_ngcontent-%COMP%]{align-items:center}.cursor[_ngcontent-%COMP%]:hover{cursor:pointer}.truncate[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:70%}.animation-perform[_ngcontent-%COMP%]{will-change:auto}.hrlight[_ngcontent-%COMP%]{height:1.5px;background-color:#e4e6eb;border:none}.hrdark[_ngcontent-%COMP%]{height:1.5px;background-color:#0284c7!important;border:none}.fullwidth[_ngcontent-%COMP%]{width:100%}.with-icon[_ngcontent-%COMP%]{display:flex;align-items:center;text-overflow:ellipsis;overflow:hidden}.request-buttons[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:96%!important}"],data:{animation:[(0,u.X$)("swipeRight",[(0,u.eR)(":enter",[(0,u.jt)(120,(0,u.F4)([(0,u.oB)({transform:"translate3d(-100%, 0, 0)",visibility:"visible"}),(0,u.oB)({transform:"translate3d(0, 0, 0)"})]))]),(0,u.eR)(":leave",[])]),(0,u.X$)("swipeLeft",[(0,u.eR)(":enter",[(0,u.jt)(120,(0,u.F4)([(0,u.oB)({transform:"translate3d(100%, 0, 0)",visibility:"visible"}),(0,u.oB)({transform:"translate3d(0, 0, 0)"})]))]),(0,u.eR)(":leave",[])]),(0,u.X$)("fadeIn",[(0,u.eR)(":enter",[(0,u.jt)(120,(0,u.F4)([(0,u.oB)({opacity:"0"}),(0,u.oB)({opacity:"1"})]))])])]}}),n})();var y=c(8505),_=c(8966),z=c(1271);function X(n,s){1&n&&(t.TgZ(0,"div"),t.O4$(),t.TgZ(1,"svg",12),t._UZ(2,"path",13),t.qZA()())}function K(n,s){1&n&&(t.O4$(),t.TgZ(0,"svg",14),t._UZ(1,"path",15),t.qZA())}function G(n,s){1&n&&(t.TgZ(0,"div"),t.O4$(),t.TgZ(1,"svg",12),t._UZ(2,"path",13),t.qZA()())}function tt(n,s){1&n&&(t.O4$(),t.TgZ(0,"svg",14),t._UZ(1,"path",15),t.qZA())}function et(n,s){1&n&&(t.TgZ(0,"div"),t.O4$(),t.TgZ(1,"svg",12),t._UZ(2,"path",13),t.qZA()())}function nt(n,s){1&n&&(t.O4$(),t.TgZ(0,"svg",14),t._UZ(1,"path",15),t.qZA())}function it(n,s){1&n&&(t.TgZ(0,"div"),t.O4$(),t.TgZ(1,"svg",12),t._UZ(2,"path",13),t.qZA()())}function ot(n,s){1&n&&(t.O4$(),t.TgZ(0,"svg",14),t._UZ(1,"path",15),t.qZA())}function rt(n,s){1&n&&(t.TgZ(0,"div"),t.O4$(),t.TgZ(1,"svg",12),t._UZ(2,"path",13),t.qZA()())}function st(n,s){1&n&&(t.O4$(),t.TgZ(0,"svg",14),t._UZ(1,"path",15),t.qZA())}let at=(()=>{class n{constructor(e,i,o,r){this.dialogRef=e,this.apollo=i,this.snackBar=o,this.user=r,this.numberofStars=5}ngOnInit(){console.log("Rating this user "+this.user.email)}onNoClick(){this.dialogRef.close()}setStars(e){this.numberofStars=e,console.log("setting stars to "+e)}getFill(e){return e<this.numberofStars?"259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z":"M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"}greater(e){return this.numberofStars>=e}add(){this.apollo.mutate({mutation:d.Ps`
      mutation{
        addRating(
          email:"${this.user.email}",
          rating: ${this.numberofStars},
        ){
          message
        }
      }
      `}).subscribe({next:e=>{console.log(e.data.addRating.message),this.snackBar.open("Success!","",{duration:2e3}),this.dialogRef.close()}})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(_.so),t.Y36(d._M),t.Y36(z.ux),t.Y36(_.WI))},n.\u0275cmp=t.Xpm({type:n,selectors:[["training-buddy-rating"]],decls:32,vars:12,consts:[[1,""],[1,"py-3","sm:max-w-xl","sm:mx-auto"],[1,"min-w-1xl","flex","flex-col","rounded-xl"],[1,"w-full","flex","flex-col","items-center"],[1,"flex","flex-col","items-center","py-6","space-y-3"],[1,"text-lg","text-gray-800","text-center"],[1,"flex","justify-center"],[3,"click"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"w-3/4","flex","flex-col"],[1,"py-3","my-8","text-lg","bg-black","rounded-xl","text-white",3,"click"],["aria-hidden","true","focusable","false","data-prefix","fas","data-icon","star","role","img","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 576 512",1,"w-4","text-black-500","mr-1"],["fill","currentColor","d","M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"],["aria-hidden","true","focusable","false","data-prefix","far","data-icon","star","role","img","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 576 512",1,"w-4","text-black-500"],["fill","currentColor","d","M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"span",5),t._uU(6),t.qZA()(),t.TgZ(7,"div")(8,"ul",6)(9,"li",7),t.NdJ("click",function(){return i.setStars(1)}),t.YNc(10,X,3,0,"div",8),t.YNc(11,K,2,0,"ng-template",null,9,t.W1O),t.qZA(),t.TgZ(13,"li",7),t.NdJ("click",function(){return i.setStars(2)}),t.YNc(14,G,3,0,"div",8),t.YNc(15,tt,2,0,"ng-template",null,9,t.W1O),t.qZA(),t.TgZ(17,"li",7),t.NdJ("click",function(){return i.setStars(3)}),t.YNc(18,et,3,0,"div",8),t.YNc(19,nt,2,0,"ng-template",null,9,t.W1O),t.qZA(),t.TgZ(21,"li",7),t.NdJ("click",function(){return i.setStars(4)}),t.YNc(22,it,3,0,"div",8),t.YNc(23,ot,2,0,"ng-template",null,9,t.W1O),t.qZA(),t.TgZ(25,"li",7),t.NdJ("click",function(){return i.setStars(5)}),t.YNc(26,rt,3,0,"div",8),t.YNc(27,st,2,0,"ng-template",null,9,t.W1O),t.qZA()()(),t.TgZ(29,"div",10)(30,"button",11),t.NdJ("click",function(){return i.add()}),t._uU(31,"Rate now"),t.qZA()()()()()()),2&e){const o=t.MAs(12);t.xp6(6),t.AsE("How would you rate ",i.user.userName," ",i.user.userSurname,"?"),t.xp6(4),t.Q6J("ngIf",i.greater(1))("ngIfElse",o),t.xp6(4),t.Q6J("ngIf",i.greater(2))("ngIfElse",o),t.xp6(4),t.Q6J("ngIf",i.greater(3))("ngIfElse",o),t.xp6(4),t.Q6J("ngIf",i.greater(4))("ngIfElse",o),t.xp6(4),t.Q6J("ngIf",i.greater(5))("ngIfElse",o)}},directives:[m.O5],styles:[""]}),n})();var T=c(4585),lt=c(7531);function ct(n,s){1&n&&(t.TgZ(0,"div",4),t._UZ(1,"mat-spinner"),t.qZA())}function ut(n,s){1&n&&(t.TgZ(0,"div",11)(1,"mat-hint",12),t._uU(2,"No buddies available to add"),t.qZA()())}function dt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td",13)(2,"div",14)(3,"div",15),t._UZ(4,"img",16),t.qZA(),t.TgZ(5,"div",17),t._uU(6),t.qZA()()(),t.TgZ(7,"td",13)(8,"button",18),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(2).sendRequest(null==r?null:r.email)}),t.TgZ(9,"mat-icon"),t._uU(10,"add_circle"),t.qZA()()()()}if(2&n){const e=s.$implicit;t.xp6(4),t.s9C("src",null==e?null:e.image,t.LSH),t.xp6(2),t.AsE("",null==e?null:e.userName," ",null==e?null:e.userSurname,"")}}function pt(n,s){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,ut,3,0,"div",5),t.TgZ(2,"div",6)(3,"div",7)(4,"table",8)(5,"tbody",9),t.YNc(6,dt,11,3,"tr",10),t.qZA()()()()()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.noBuddies),t.xp6(5),t.Q6J("ngForOf",e.buddies)}}let gt=(()=>{class n{constructor(e,i,o,r,a){this.dialogRef=e,this.apollo=i,this.cookieService=o,this.afStorage=r,this.workoutID=a,this.loading=!0,this.noBuddies=!1,this.email=this.cookieService.get("email")}ngOnInit(){console.log("sheeesh"),console.log(this.workoutID),this.getData(this.email)}onNoClick(){this.dialogRef.close()}getData(e){this.getBuddies(e).subscribe({next:i=>{this.fetchImages(i.data.getConnections).then(o=>{this.buddies=o,this.buddiesOriginal=o}),this.loading=!1,this.buddyCount=this.buddies.length,0==this.buddyCount&&(this.noBuddies=!0)}})}getBuddies(e){return this.apollo.query({query:d.Ps`query{
        getConnections(
          email: "${e}",
      ){
        userName,
        userSurname,
        location,
        longitude,
        latitude,
        stravaToken,
        dob,
        gender,
        email,
        cellNumber,
        bio,
        metrics{lift , ride , run , swim},
        buddies,
        id
      }
      }
      `})}sendRequest(e){this.apollo.mutate({mutation:d.Ps`
        mutation{
        sendInvite(
          email: "${this.email}",
          receiver:"${e}",
          workoutID: "${this.workoutID}"
        ){
          message
        }
      }
    `}).subscribe({next:i=>{console.log(i.data.sendInvite.message),this.buddiesOriginal.map((o,r)=>{o.email==e&&(1==this.buddyCount?(this.buddiesOriginal=null,this.buddies=null,this.buddyCount=0,this.noBuddies=!0):(this.buddiesOriginal.splice(r,1),this.buddies=this.buddiesOriginal,console.log("here")))}),"Failure"==i.data.sendInvite.message&&this.createInvite(e)}})}createInvite(e){this.apollo.mutate({mutation:d.Ps`
        mutation{
          createInvite(
            email: "${this.email}",
            workoutID: "${this.workoutID}"
          ){
            message
          }
      }
      `}).subscribe({next:i=>{console.log(i.data.createInvite.message),this.sendRequest(e)}})}fetchImages(e){return new Promise((i,o)=>{const r=[];e.forEach(a=>{this.afStorage.ref(`UserProfileImage/${a.id}`).getDownloadURL().pipe((0,y.b)(g=>{const l={image:g},p=Object.assign(Object.assign({},a),l);r.push(p)})).subscribe()}),i(r)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(_.so),t.Y36(d._M),t.Y36(v.N),t.Y36(T.Q1),t.Y36(_.WI))},n.\u0275cmp=t.Xpm({type:n,selectors:[["training-buddy-workout-invite"]],decls:7,vars:2,consts:[["appearance","outline",1,"mt-3","w-full"],["id","search","matInput","","placeholder","Search for buddies to add","name","search"],["class","spinner","id","pagespinner",4,"ngIf"],[4,"ngIf"],["id","pagespinner",1,"spinner"],["class","my-6",4,"ngIf"],[1,"w-full","max-w-2xl","mx-auto","bg-white"],[1,"p-3"],[1,"table-auto","w-full"],[1,"text-sm","divide-y","divide-gray-100"],[4,"ngFor","ngForOf"],[1,"my-6"],[1,"text-center"],[1,"p-2","whitespace-nowrap"],[1,"flex","items-center"],[1,"w-10","h-10","flex-shrink-0","mr-2","sm:mr-3"],["width","40","height","40","alt","pic",1,"rounded-full","w-10","h-10",3,"src"],[1,"font-medium","text-gray-800"],[1,"text-center","mx-5","button",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"mat-dialog-content")(1,"mat-form-field",0)(2,"mat-label"),t._uU(3,"Search"),t.qZA(),t._UZ(4,"input",1),t.qZA(),t.YNc(5,ct,2,0,"div",2),t.YNc(6,pt,7,2,"div",3),t.qZA()),2&e&&(t.xp6(5),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},directives:[_.xY,x.KE,x.hX,lt.Nt,m.O5,f.Ou,x.bx,m.sg,w.Hw],styles:[".pic[_ngcontent-%COMP%]{background-color:#1b1a1b13;height:20px;width:20px;border-radius:50%;background-size:80%;background-position:center;background-repeat:no-repeat;margin-bottom:5%!important}#pagespinner[_ngcontent-%COMP%]{margin:auto;width:50%;padding:10px}.spinner[_ngcontent-%COMP%]     .mat-progress-spinner circle, .mat-spinner[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{stroke:#0284c7!important}"]}),n})();var mt=c(6971),C=c(3954);function _t(n,s){1&n&&(t.TgZ(0,"div",3),t._UZ(1,"mat-spinner"),t.qZA())}function ht(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",23),t._UZ(1,"img",24),t.TgZ(2,"div",25)(3,"p",26),t._uU(4),t.qZA(),t.TgZ(5,"mat-grid-list",27)(6,"mat-grid-tile",28),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(2).rateUser(r)}),t._uU(7,"Rate"),t.qZA(),t.TgZ(8,"mat-grid-tile",28),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(2).viewProfile(r)}),t._uU(9,"Profile"),t.qZA()()()()}if(2&n){const e=s.$implicit;t.xp6(1),t.s9C("src",e.image,t.LSH),t.xp6(3),t.AsE("",e.userName," ",e.userSurname,"")}}function vt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",4)(2,"div",5)(3,"div",6)(4,"p",7),t._uU(5),t.qZA()(),t.TgZ(6,"div",8)(7,"dl",9)(8,"div",10)(9,"dt",11)(10,"p",12)(11,"mat-icon"),t._uU(12,"date_range"),t.qZA(),t._uU(13," When"),t.qZA()(),t.TgZ(14,"dd",13)(15,"p",11),t._uU(16),t.qZA()()(),t.TgZ(17,"div",10)(18,"dt",11)(19,"p",12)(20,"mat-icon"),t._uU(21," directions_bike"),t.qZA(),t._uU(22," Activity Type"),t.qZA()(),t.TgZ(23,"dd",13)(24,"p",11),t._uU(25),t.qZA()()(),t.TgZ(26,"div",10)(27,"dt",11)(28,"p",14)(29,"mat-icon"),t._uU(30," location_on"),t.qZA(),t._uU(31," Where"),t.qZA()(),t.TgZ(32,"dd",13)(33,"p",11),t._uU(34),t.qZA()()(),t.TgZ(35,"div",10)(36,"dt",11)(37,"p",15)(38,"mat-icon"),t._uU(39,"timelapse"),t.qZA(),t._uU(40," Duration"),t.qZA()(),t.TgZ(41,"dd",13)(42,"p",11),t._uU(43),t.qZA()()(),t.TgZ(44,"div",10)(45,"dt",11)(46,"p",14)(47,"mat-icon"),t._uU(48,"date_range"),t.qZA(),t._uU(49," Distance"),t.qZA()(),t.TgZ(50,"dd",13)(51,"p",11),t._uU(52),t.qZA()()(),t.TgZ(53,"div",10)(54,"dt",11)(55,"p",14)(56,"mat-icon"),t._uU(57," email"),t.qZA(),t._uU(58," Organiser"),t.qZA()(),t.TgZ(59,"dd",13)(60,"p",11),t._uU(61),t.qZA()()()()()()(),t.TgZ(62,"div",16)(63,"div",17)(64,"p",18),t._uU(65,"Participants "),t.TgZ(66,"button",19),t.NdJ("click",function(){return t.CHM(e),t.oxw().openDialog()}),t.TgZ(67,"mat-icon"),t._uU(68,"add"),t.qZA()()(),t.TgZ(69,"p",20),t._uU(70,"These are all the participants of your workout please rate their kindness."),t.qZA()(),t.TgZ(71,"div",21),t.YNc(72,ht,10,3,"div",22),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(5),t.Oqu(null==e.workout?null:e.workout.title),t.xp6(11),t.HOy("",null==e.workout?null:e.workout.startTime.day," ",null==e.workout?null:e.workout.startTime.month," ",null==e.workout?null:e.workout.startTime.year," ",null==e.workout?null:e.workout.startTime.time,""),t.xp6(9),t.hij(" ",null==e.workout?null:e.workout.startPoint," "),t.xp6(9),t.hij(" ",null==e.workout?null:e.workout.startPoint," "),t.xp6(9),t.hij(" ",null==e.workout?null:e.workout.proposedDuration," "),t.xp6(9),t.hij(" ",null==e.workout?null:e.workout.proposedDistance," km"),t.xp6(9),t.Oqu(null==e.workout?null:e.workout.organiser),t.xp6(11),t.Q6J("ngForOf",e.participants)}}const xt=[{path:"",component:L},{path:":workoutID",component:(()=>{class n{constructor(e,i,o,r,a,g){this.activated=e,this.cookieService=i,this.apollo=o,this.afStorage=r,this.dialog=a,this.router=g,this.loading=!0,this.email=i.get("email")}ngOnInit(){this.activated.params.subscribe(e=>{this.workoutID=null==e?void 0:e.workoutID,this.getData()})}getWorkout(){return this.apollo.query({query:d.Ps`
      query{
        getWorkout(
          email:"${this.email}",
          workoutID: "${this.workoutID}",
        ){
          title,
          startTime,
          organiser,
          participants{
            userName,
            userSurname,
            id,
            email
          },
          activityType,
          startPoint,
          proposedDistance,
          proposedDuration,
        }
      }`})}getData(){this.getWorkout().subscribe({next:e=>{this.fetchImages(e.data.getWorkout.participants).then(i=>{console.log(i),this.participants=i}),this.workout=this.convertQuery(e.data.getWorkout),this.loading=!1}})}viewProfile(e){console.log(e),this.router.navigate([`/profile/${e}`])}convertQuery(e){return{title:e.title,startTime:this.startDateTime(e.startTime),organiser:e.organiser,activityType:e.activityType,startPoint:e.startPoint,proposedDistance:e.proposedDistance,proposedDuration:e.proposedDuration}}fetchImages(e){return new Promise((i,o)=>{const r=[];e.forEach(a=>{this.afStorage.ref(`UserProfileImage/${a.id}`).getDownloadURL().pipe((0,y.b)(g=>{const l={image:g},p=Object.assign(Object.assign({},a),l);r.push(p)})).subscribe()}),i(r)})}startDateTime(e){const i=new Date(1e3*Number(e)),r=new m.uU("en-US").transform(i,"HH:mm");return{day:i.getDate(),month:["January","February","March","April","May","June","July","August","September","October","November","December"][i.getMonth()],year:i.getFullYear(),time:r}}openDialog(){this.dialog.open(gt,{minWidth:"300px",maxWidth:"80%",data:this.workoutID}).afterClosed().subscribe(i=>{console.log("The dialog was closed")})}rateUser(e){this.dialog.open(at,{width:"250px",data:e}).afterClosed().subscribe(o=>{console.log("The dialog was closed")})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.gz),t.Y36(v.N),t.Y36(d._M),t.Y36(T.Q1),t.Y36(_.uw),t.Y36(h.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["training-buddy-workout"]],decls:4,vars:2,consts:[["title","Event"],["class","spinner","id","pagespinner",4,"ngIf"],[4,"ngIf"],["id","pagespinner",1,"spinner"],[1,"dark:divide-undefined","dark:divide-undefined"],[1,"max-w-7xl","mx-auto","px-4"],[1,"text-center"],[1,"mt-2","text-3xl","font-extrabold","tracking-tight","text-gray-900","dark:divide-undefined","dark:text-gray-900"],[1,"mt-10"],[1,"space-y-2","md:space-y-0","md:grid","md:grid-cols-2","md:gap-x-8","md:gap-y-10"],[1,"relative"],[1,""],[1,"with-icon","text-xl","leading-6","text-gray-900","dark:text-gray-900","font-bold"],[1,"mt-2","text-base"],[1,"with-icon","text-xl","leading-6","font-semibold","text-gray-900","dark:text-gray-900"],[1,"with-icon","text-xl","leading-6","font-semibold","text-gray-900","dark:divide-undefined","dark:text-gray-900"],[1,"py-8","pb-24","px-4","mx-auto","sm:max-w-xl","sm:py-14","md:max-w-full","md:px-24","lg:max-w-screen-xl","lg:px-8"],[1,"max-w-xl","mb-10","md:mx-auto","text-center","lg:max-w-2xl","md:mb-12"],[1,"text-xl","leading-6","font-semibold","text-gray-900","dark:text-gray-900"],["mat-raised-button","","id","addbutton",1,"text-white","text-sm","rounded-lg",3,"click"],[1,"md:text-lg"],[1,"pb-4","grid","gap-10","row-gap-8","mx-auto","sm:row-gap-10","lg:max-w-screen-lg","sm:grid-cols-2","lg:grid-cols-3"],["class","flex",4,"ngFor","ngForOf"],[1,"flex"],["alt","No alt",1,"object-cover","w-20","h-20","mr-4","rounded-full","shadow","bg-blue-100",3,"src"],[1,"flex","flex-col","justify-center"],[1,"text-lg","font-bold","text-slate-900","dark:text-slate-900"],["cols","2","rowHeight","2:1"],[1,"bg-slate-900","text-white","rounded-xl",3,"click"]],template:function(e,i){1&e&&(t._UZ(0,"training-buddy-back-navbar",0),t.YNc(1,_t,2,0,"div",1),t.YNc(2,vt,73,11,"div",2),t._UZ(3,"training-buddy-navbar")),2&e&&(t.xp6(1),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},directives:[mt.p,m.O5,f.Ou,w.Hw,Z.lW,m.sg,C.Il,C.DX,b.S],styles:["#pagespinner[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}#addbutton[_ngcontent-%COMP%]{background-color:#1b1a1b!important}.spinner[_ngcontent-%COMP%]     .mat-progress-spinner circle, .mat-spinner[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{stroke:#1b1a1b}.with-icon[_ngcontent-%COMP%]{display:flex;align-items:center;text-overflow:ellipsis;overflow:hidden}"]}),n})()}];let ft=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[h.Bz.forChild(xt)],h.Bz]}),n})();var wt=c(7918);let kt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[v.N,{provide:_.so,useValue:[]},{provide:_.WI,useValue:[]}],imports:[[m.ez,ft,wt.W,_.Is]]}),n})()}}]);