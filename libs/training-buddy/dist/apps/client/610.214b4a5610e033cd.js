"use strict";var Ge=Object.defineProperty,wt=Object.getOwnPropertySymbols,Xe=Object.prototype.hasOwnProperty,tn=Object.prototype.propertyIsEnumerable,Mt=(A,b,p)=>b in A?Ge(A,b,{enumerable:!0,configurable:!0,writable:!0,value:p}):A[b]=p,P=(A,b)=>{for(var p in b||(b={}))Xe.call(b,p)&&Mt(A,p,b[p]);if(wt)for(var p of wt(b))tn.call(b,p)&&Mt(A,p,b[p]);return A};(self.webpackChunkclient=self.webpackChunkclient||[]).push([[610],{1610:(A,b,p)=>{p.r(b),p.d(b,{ClientViewprofileFeatureModule:()=>ze});var U=p(9808),R=p(5357),x=p(1777),V=p(9444);function T(n){return Array.isArray?Array.isArray(n):"[object Array]"===st(n)}function M(n){return"string"==typeof n}function nt(n){return"number"==typeof n}function it(n){return"object"==typeof n}function y(n){return null!=n}function Y(n){return!n.trim().length}function st(n){return null==n?void 0===n?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}const rt=Object.prototype.hasOwnProperty;class Rt{constructor(i){this._keys=[],this._keyMap={};let e=0;i.forEach(s=>{let r=ot(s);e+=r.weight,this._keys.push(r),this._keyMap[r.id]=r,e+=r.weight}),this._keys.forEach(s=>{s.weight/=e})}get(i){return this._keyMap[i]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function ot(n){let i=null,e=null,s=null,r=1,o=null;if(M(n)||T(n))s=n,i=ct(n),e=q(n);else{if(!rt.call(n,"name"))throw new Error("Missing name property in key");const c=n.name;if(s=c,rt.call(n,"weight")&&(r=n.weight,r<=0))throw new Error((n=>`Property 'weight' in key '${n}' must be a positive integer`)(c));i=ct(c),e=q(c),o=n.getFn}return{path:i,id:e,weight:r,src:s,getFn:o}}function ct(n){return T(n)?n:n.split(".")}function q(n){return T(n)?n.join("."):n}const $t={useExtendedSearch:!1,getFn:function Et(n,i){let e=[],s=!1;const r=(o,c,l)=>{if(y(o))if(c[l]){const a=o[c[l]];if(!y(a))return;if(l===c.length-1&&(M(a)||nt(a)||function It(n){return!0===n||!1===n||function Ot(n){return it(n)&&null!==n}(n)&&"[object Boolean]"==st(n)}(a)))e.push(function At(n){return null==n?"":function St(n){if("string"==typeof n)return n;let i=n+"";return"0"==i&&1/n==-1/0?"-0":i}(n)}(a));else if(T(a)){s=!0;for(let d=0,h=a.length;d<h;d+=1)r(a[d],c,l+1)}else c.length&&r(a,c,l+1)}else e.push(o)};return r(n,M(i)?i.split("."):i,0),s?e:e[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var g=P(P(P(P({},{isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(n,i)=>n.score===i.score?n.idx<i.idx?-1:1:n.score<i.score?-1:1}),{includeMatches:!1,findAllMatches:!1,minMatchCharLength:1}),{location:0,threshold:.6,distance:100}),$t);const Ft=/[^ ]+/g;class H{constructor({getFn:i=g.getFn,fieldNormWeight:e=g.fieldNormWeight}={}){this.norm=function Jt(n=1,i=3){const e=new Map,s=Math.pow(10,i);return{get(r){const o=r.match(Ft).length;if(e.has(o))return e.get(o);const c=1/Math.pow(o,.5*n),l=parseFloat(Math.round(c*s)/s);return e.set(o,l),l},clear(){e.clear()}}}(e,3),this.getFn=i,this.isCreated=!1,this.setIndexRecords()}setSources(i=[]){this.docs=i}setIndexRecords(i=[]){this.records=i}setKeys(i=[]){this.keys=i,this._keysMap={},i.forEach((e,s)=>{this._keysMap[e.id]=s})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,M(this.docs[0])?this.docs.forEach((i,e)=>{this._addString(i,e)}):this.docs.forEach((i,e)=>{this._addObject(i,e)}),this.norm.clear())}add(i){const e=this.size();M(i)?this._addString(i,e):this._addObject(i,e)}removeAt(i){this.records.splice(i,1);for(let e=i,s=this.size();e<s;e+=1)this.records[e].i-=1}getValueForItemAtKeyId(i,e){return i[this._keysMap[e]]}size(){return this.records.length}_addString(i,e){if(!y(i)||Y(i))return;let s={v:i,i:e,n:this.norm.get(i)};this.records.push(s)}_addObject(i,e){let s={i:e,$:{}};this.keys.forEach((r,o)=>{let c=r.getFn?r.getFn(i):this.getFn(i,r.path);if(y(c))if(T(c)){let l=[];const u=[{nestedArrIndex:-1,value:c}];for(;u.length;){const{nestedArrIndex:a,value:d}=u.pop();if(y(d))if(M(d)&&!Y(d)){let h={v:d,i:a,n:this.norm.get(d)};l.push(h)}else T(d)&&d.forEach((h,f)=>{u.push({nestedArrIndex:f,value:h})})}s.$[o]=l}else if(M(c)&&!Y(c)){let l={v:c,n:this.norm.get(c)};s.$[o]=l}}),this.records.push(s)}toJSON(){return{keys:this.keys,records:this.records}}}function at(n,i,{getFn:e=g.getFn,fieldNormWeight:s=g.fieldNormWeight}={}){const r=new H({getFn:e,fieldNormWeight:s});return r.setKeys(n.map(ot)),r.setSources(i),r.create(),r}function Qt(n,{getFn:i=g.getFn,fieldNormWeight:e=g.fieldNormWeight}={}){const{keys:s,records:r}=n,o=new H({getFn:i,fieldNormWeight:e});return o.setKeys(s),o.setIndexRecords(r),o}function $(n,{errors:i=0,currentLocation:e=0,expectedLocation:s=0,distance:r=g.distance,ignoreLocation:o=g.ignoreLocation}={}){const c=i/n.length;if(o)return c;const l=Math.abs(s-e);return r?c+l/r:l?1:c}const k=32;function qt(n){let i={};for(let e=0,s=n.length;e<s;e+=1){const r=n.charAt(e);i[r]=(i[r]||0)|1<<s-e-1}return i}class lt{constructor(i,{location:e=g.location,threshold:s=g.threshold,distance:r=g.distance,includeMatches:o=g.includeMatches,findAllMatches:c=g.findAllMatches,minMatchCharLength:l=g.minMatchCharLength,isCaseSensitive:u=g.isCaseSensitive,ignoreLocation:a=g.ignoreLocation}={}){if(this.options={location:e,threshold:s,distance:r,includeMatches:o,findAllMatches:c,minMatchCharLength:l,isCaseSensitive:u,ignoreLocation:a},this.pattern=u?i:i.toLowerCase(),this.chunks=[],!this.pattern.length)return;const d=(f,m)=>{this.chunks.push({pattern:f,alphabet:qt(f),startIndex:m})},h=this.pattern.length;if(h>k){let f=0;const m=h%k,_=h-m;for(;f<_;)d(this.pattern.substr(f,k),f),f+=k;if(m){const v=h-k;d(this.pattern.substr(v),v)}}else d(this.pattern,0)}searchIn(i){const{isCaseSensitive:e,includeMatches:s}=this.options;if(e||(i=i.toLowerCase()),this.pattern===i){let _={isMatch:!0,score:0};return s&&(_.indices=[[0,i.length-1]]),_}const{location:r,distance:o,threshold:c,findAllMatches:l,minMatchCharLength:u,ignoreLocation:a}=this.options;let d=[],h=0,f=!1;this.chunks.forEach(({pattern:_,alphabet:v,startIndex:L})=>{const{isMatch:S,score:E,indices:N}=function Yt(n,i,e,{location:s=g.location,distance:r=g.distance,threshold:o=g.threshold,findAllMatches:c=g.findAllMatches,minMatchCharLength:l=g.minMatchCharLength,includeMatches:u=g.includeMatches,ignoreLocation:a=g.ignoreLocation}={}){if(i.length>k)throw new Error("Pattern length exceeds max of 32.");const d=i.length,h=n.length,f=Math.max(0,Math.min(s,h));let m=o,_=f;const v=l>1||u,L=v?Array(h):[];let S;for(;(S=n.indexOf(i,_))>-1;){let C=$(i,{currentLocation:S,expectedLocation:f,distance:r,ignoreLocation:a});if(m=Math.min(C,m),_=S+d,v){let O=0;for(;O<d;)L[S+O]=1,O+=1}}_=-1;let E=[],N=1,Q=d+h;const We=1<<d-1;for(let C=0;C<d;C+=1){let O=0,Z=Q;for(;O<Z;)$(i,{errors:C,currentLocation:f+Z,expectedLocation:f,distance:r,ignoreLocation:a})<=m?O=Z:Q=Z,Z=Math.floor((Q-O)/2+O);Q=Z;let yt=Math.max(1,f-Z+1),et=c?h:Math.min(f+Z,h)+d,B=Array(et+2);B[et+1]=(1<<C)-1;for(let w=et;w>=yt;w-=1){let j=w-1,Ct=e[n.charAt(j)];if(v&&(L[j]=+!!Ct),B[w]=(B[w+1]<<1|1)&Ct,C&&(B[w]|=(E[w+1]|E[w])<<1|1|E[w+1]),B[w]&We&&(N=$(i,{errors:C,currentLocation:j,expectedLocation:f,distance:r,ignoreLocation:a}),N<=m)){if(m=N,_=j,_<=f)break;yt=Math.max(1,2*f-_)}}if($(i,{errors:C+1,currentLocation:f,expectedLocation:f,distance:r,ignoreLocation:a})>m)break;E=B}const tt={isMatch:_>=0,score:Math.max(.001,N)};if(v){const C=function jt(n=[],i=g.minMatchCharLength){let e=[],s=-1,r=-1,o=0;for(let c=n.length;o<c;o+=1){let l=n[o];l&&-1===s?s=o:!l&&-1!==s&&(r=o-1,r-s+1>=i&&e.push([s,r]),s=-1)}return n[o-1]&&o-s>=i&&e.push([s,o-1]),e}(L,l);C.length?u&&(tt.indices=C):tt.isMatch=!1}return tt}(i,_,v,{location:r+L,distance:o,threshold:c,findAllMatches:l,minMatchCharLength:u,includeMatches:s,ignoreLocation:a});S&&(f=!0),h+=E,S&&N&&(d=[...d,...N])});let m={isMatch:f,score:f?h/this.chunks.length:1};return f&&s&&(m.indices=d),m}}class I{constructor(i){this.pattern=i}static isMultiMatch(i){return ut(i,this.multiRegex)}static isSingleMatch(i){return ut(i,this.singleRegex)}search(){}}function ut(n,i){const e=n.match(i);return e?e[1]:null}class dt extends I{constructor(i,{location:e=g.location,threshold:s=g.threshold,distance:r=g.distance,includeMatches:o=g.includeMatches,findAllMatches:c=g.findAllMatches,minMatchCharLength:l=g.minMatchCharLength,isCaseSensitive:u=g.isCaseSensitive,ignoreLocation:a=g.ignoreLocation}={}){super(i),this._bitapSearch=new lt(i,{location:e,threshold:s,distance:r,includeMatches:o,findAllMatches:c,minMatchCharLength:l,isCaseSensitive:u,ignoreLocation:a})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(i){return this._bitapSearch.searchIn(i)}}class gt extends I{constructor(i){super(i)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(i){let s,e=0;const r=[],o=this.pattern.length;for(;(s=i.indexOf(this.pattern,e))>-1;)e=s+o,r.push([s,e-1]);const c=!!r.length;return{isMatch:c,score:c?0:1,indices:r}}}const D=[class Ht extends I{constructor(i){super(i)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(i){const e=i===this.pattern;return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},gt,class Kt extends I{constructor(i){super(i)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(i){const e=i.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},class zt extends I{constructor(i){super(i)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(i){const e=!i.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,i.length-1]}}},class Gt extends I{constructor(i){super(i)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(i){const e=!i.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,i.length-1]}}},class Wt extends I{constructor(i){super(i)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(i){const e=i.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[i.length-this.pattern.length,i.length-1]}}},class Dt extends I{constructor(i){super(i)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(i){const s=-1===i.indexOf(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,i.length-1]}}},dt],ht=D.length,Xt=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,ne=new Set([dt.type,gt.type]),K=[];function z(n,i){for(let e=0,s=K.length;e<s;e+=1){let r=K[e];if(r.condition(n,i))return new r(n,i)}return new lt(n,i)}const G=n=>!(!n.$and&&!n.$or),ft=n=>({$and:Object.keys(n).map(i=>({[i]:n[i]}))});function pt(n,i,{auto:e=!0}={}){const s=r=>{let o=Object.keys(r);const c=(n=>!!n.$path)(r);if(!c&&o.length>1&&!G(r))return s(ft(r));if((n=>!T(n)&&it(n)&&!G(n))(r)){const u=c?r.$path:o[0],a=c?r.$val:r[u];if(!M(a))throw new Error((n=>`Invalid value for key ${n}`)(u));const d={keyId:q(u),pattern:a};return e&&(d.searcher=z(a,i)),d}let l={children:[],operator:o[0]};return o.forEach(u=>{const a=r[u];T(a)&&a.forEach(d=>{l.children.push(s(d))})}),l};return G(n)||(n=ft(n)),s(n)}function ae(n,i){const e=n.matches;i.matches=[],y(e)&&e.forEach(s=>{if(!y(s.indices)||!s.indices.length)return;const{indices:r,value:o}=s;let c={indices:r,value:o};s.key&&(c.key=s.key.src),s.idx>-1&&(c.refIndex=s.idx),i.matches.push(c)})}function le(n,i){i.score=n.score}let X=(()=>{class n{constructor(e,s={},r){this.options=P(P({},g),s),this._keyStore=new Rt(this.options.keys),this.setCollection(e,r)}setCollection(e,s){if(this._docs=e,s&&!(s instanceof H))throw new Error("Incorrect 'index' type");this._myIndex=s||at(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){!y(e)||(this._docs.push(e),this._myIndex.add(e))}remove(e=(()=>!1)){const s=[];for(let r=0,o=this._docs.length;r<o;r+=1){const c=this._docs[r];e(c,r)&&(this.removeAt(r),r-=1,o-=1,s.push(c))}return s}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:s=-1}={}){const{includeMatches:r,includeScore:o,shouldSort:c,sortFn:l,ignoreFieldNorm:u}=this.options;let a=M(e)?M(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return function ce(n,{ignoreFieldNorm:i=g.ignoreFieldNorm}){n.forEach(e=>{let s=1;e.matches.forEach(({key:r,norm:o,score:c})=>{const l=r?r.weight:null;s*=Math.pow(0===c&&l?Number.EPSILON:c,(l||1)*(i?1:o))}),e.score=s})}(a,{ignoreFieldNorm:u}),c&&a.sort(l),nt(s)&&s>-1&&(a=a.slice(0,s)),function ue(n,i,{includeMatches:e=g.includeMatches,includeScore:s=g.includeScore}={}){const r=[];return e&&r.push(ae),s&&r.push(le),n.map(o=>{const{idx:c}=o,l={item:i[c],refIndex:c};return r.length&&r.forEach(u=>{u(o,l)}),l})}(a,this._docs,{includeMatches:r,includeScore:o})}_searchStringList(e){const s=z(e,this.options),{records:r}=this._myIndex,o=[];return r.forEach(({v:c,i:l,n:u})=>{if(!y(c))return;const{isMatch:a,score:d,indices:h}=s.searchIn(c);a&&o.push({item:c,idx:l,matches:[{score:d,value:c,norm:u,indices:h}]})}),o}_searchLogical(e){const s=pt(e,this.options),r=(u,a,d)=>{if(!u.children){const{keyId:f,searcher:m}=u,_=this._findMatches({key:this._keyStore.get(f),value:this._myIndex.getValueForItemAtKeyId(a,f),searcher:m});return _&&_.length?[{idx:d,item:a,matches:_}]:[]}const h=[];for(let f=0,m=u.children.length;f<m;f+=1){const v=r(u.children[f],a,d);if(v.length)h.push(...v);else if("$and"===u.operator)return[]}return h},c={},l=[];return this._myIndex.records.forEach(({$:u,i:a})=>{if(y(u)){let d=r(s,u,a);d.length&&(c[a]||(c[a]={idx:a,item:u,matches:[]},l.push(c[a])),d.forEach(({matches:h})=>{c[a].matches.push(...h)}))}}),l}_searchObjectList(e){const s=z(e,this.options),{keys:r,records:o}=this._myIndex,c=[];return o.forEach(({$:l,i:u})=>{if(!y(l))return;let a=[];r.forEach((d,h)=>{a.push(...this._findMatches({key:d,value:l[h],searcher:s}))}),a.length&&c.push({idx:u,item:l,matches:a})}),c}_findMatches({key:e,value:s,searcher:r}){if(!y(s))return[];let o=[];if(T(s))s.forEach(({v:c,i:l,n:u})=>{if(!y(c))return;const{isMatch:a,score:d,indices:h}=r.searchIn(c);a&&o.push({score:d,key:e,value:c,idx:l,norm:u,indices:h})});else{const{v:c,n:l}=s,{isMatch:u,score:a,indices:d}=r.searchIn(c);u&&o.push({score:a,key:e,value:c,norm:l,indices:d})}return o}}return n.version="6.6.2",n.createIndex=at,n.parseIndex=Qt,n.config=g,n})();X.parseQuery=pt,function se(...n){K.push(...n)}(class ie{constructor(i,{isCaseSensitive:e=g.isCaseSensitive,includeMatches:s=g.includeMatches,minMatchCharLength:r=g.minMatchCharLength,ignoreLocation:o=g.ignoreLocation,findAllMatches:c=g.findAllMatches,location:l=g.location,threshold:u=g.threshold,distance:a=g.distance}={}){this.query=null,this.options={isCaseSensitive:e,includeMatches:s,minMatchCharLength:r,findAllMatches:c,ignoreLocation:o,location:l,threshold:u,distance:a},this.pattern=e?i:i.toLowerCase(),this.query=function ee(n,i={}){return n.split("|").map(e=>{let s=e.trim().split(Xt).filter(o=>o&&!!o.trim()),r=[];for(let o=0,c=s.length;o<c;o+=1){const l=s[o];let u=!1,a=-1;for(;!u&&++a<ht;){const d=D[a];let h=d.isMultiMatch(l);h&&(r.push(new d(h,i)),u=!0)}if(!u)for(a=-1;++a<ht;){const d=D[a];let h=d.isSingleMatch(l);if(h){r.push(new d(h,i));break}}}return r})}(this.pattern,this.options)}static condition(i,e){return e.useExtendedSearch}searchIn(i){const e=this.query;if(!e)return{isMatch:!1,score:1};const{includeMatches:s,isCaseSensitive:r}=this.options;i=r?i:i.toLowerCase();let o=0,c=[],l=0;for(let u=0,a=e.length;u<a;u+=1){const d=e[u];c.length=0,o=0;for(let h=0,f=d.length;h<f;h+=1){const m=d[h],{isMatch:_,indices:v,score:L}=m.search(i);if(!_){l=0,o=0,c.length=0;break}o+=1,l+=L,s&&(ne.has(m.constructor.type)?c=[...c,...v]:c.push(v))}if(o){let h={isMatch:!0,score:l/o};return s&&(h.indices=c),h}}return{isMatch:!1,score:1}}});var _t=p(7579),de=p(8505),t=p(5e3),mt=p(2160),ge=p(4585),xt=p(4594),vt=p(5245);const he=function(){return["/settings"]};let fe=(()=>{class n{ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["training-buddy-settings-navbar"]],decls:9,vars:2,consts:[["id","bar"],[1,"wrapper"],[1,"rightcontent"],[3,"routerLink"]],template:function(e,s){1&e&&(t.TgZ(0,"p")(1,"mat-toolbar",0)(2,"mat-toolbar-row")(3,"span"),t._uU(4,"Training-Buddy"),t.qZA(),t.TgZ(5,"div",1)(6,"div",2)(7,"mat-icon",3),t._uU(8,"settings"),t.qZA()()()()()()),2&e&&(t.xp6(7),t.Q6J("routerLink",t.DdM(1,he)))},directives:[xt.Ye,xt.rD,vt.Hw,R.rH],styles:[".example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}mat-toolbar[_ngcontent-%COMP%]{background-color:#ffffffe6}#bar[_ngcontent-%COMP%]{background-color:#1b1a1b!important}span[_ngcontent-%COMP%]{color:#fff}mat-icon[_ngcontent-%COMP%]{color:#fff}.rightcontent[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;padding-right:2%}.wrapper[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:right}"]}),n})();var pe=p(6971),_e=p(773),me=p(3954),J=p(7322),xe=p(7531),ve=p(7423),be=p(987);const ye=["buddySearchBox"],Ce=["logSearchBox"];function we(n,i){1&n&&t._UZ(0,"training-buddy-settings-navbar")}function Me(n,i){1&n&&t._UZ(0,"training-buddy-back-navbar",5)}function Te(n,i){1&n&&(t.TgZ(0,"div",6),t._UZ(1,"mat-spinner"),t.qZA())}function Se(n,i){1&n&&(t.ynx(0),t._UZ(1,"hr",22),t.BQk()),2&n&&(t.xp6(1),t.Q6J("@swipeLeft",void 0))}function Ae(n,i){1&n&&(t.ynx(0),t._UZ(1,"hr",23),t.BQk())}function Ie(n,i){1&n&&(t.ynx(0),t._UZ(1,"hr",23),t.BQk())}function Oe(n,i){1&n&&(t.ynx(0),t._UZ(1,"hr",22),t.BQk()),2&n&&(t.xp6(1),t.Q6J("@swipeRight",void 0))}function Ze(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",31),t.NdJ("click",function(){return t.CHM(e),t.oxw(4).clearBuddiesSearch()}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function ke(n,i){1&n&&(t.TgZ(0,"mat-icon"),t._uU(1,"more_horiz"),t.qZA())}function Le(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",32)(1,"div",33)(2,"div",34),t.NdJ("click",function(){const o=t.CHM(e).$implicit;return t.oxw(4).changeProfile(o.id)}),t._UZ(3,"img",35),t.TgZ(4,"div",36)(5,"div")(6,"h2"),t._uU(7),t.qZA()(),t.TgZ(8,"div")(9,"mat-hint"),t._uU(10),t.qZA()()()(),t.TgZ(11,"div")(12,"button",37),t.NdJ("click",function(){const o=t.CHM(e).$implicit;return t.oxw(4).openSheet(o)}),t.YNc(13,ke,2,0,"mat-icon",0),t.qZA()()()()}if(2&n){const e=i.$implicit,s=t.oxw(4);t.xp6(3),t.s9C("src",e.image,t.LSH),t.xp6(4),t.AsE("",null==e?null:e.userName," ",null==e?null:e.userSurname,""),t.xp6(3),t.Oqu(null==e?null:e.location),t.xp6(3),t.Q6J("ngIf",s.checkSelf(e.id))}}function Ne(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"mat-form-field",26)(2,"mat-label"),t._uU(3,"Search"),t.qZA(),t.TgZ(4,"input",27,28),t.NdJ("focus",function(){return t.CHM(e),t.oxw(3).showBuddiesClear()})("blur",function(){return t.CHM(e),t.oxw(3).hideBuddiesClear()})("input",function(){t.CHM(e);const r=t.MAs(5);return t.oxw(3).searchBuddies(r)}),t.qZA(),t.YNc(6,Ze,3,0,"button",29),t.qZA(),t.YNc(7,Le,14,5,"div",30),t.qZA()}if(2&n){const e=t.oxw(3);t.Q6J("@fadeIn",void 0),t.xp6(6),t.Q6J("ngIf",e.clearBuddiesbutton),t.xp6(1),t.Q6J("ngForOf",e.buddies)}}function Pe(n,i){1&n&&(t.TgZ(0,"mat-hint",13),t._uU(1,"Send some invites to your "),t.qZA())}function Re(n,i){if(1&n&&(t.TgZ(0,"div",38)(1,"mat-hint",13),t._uU(2,"No Buddies"),t.qZA(),t._UZ(3,"br"),t.YNc(4,Pe,2,0,"mat-hint",39),t.TgZ(5,"a",40)(6,"u"),t._uU(7,"Recommended Buddies"),t.qZA()()()),2&n){const e=t.oxw(3);t.xp6(4),t.Q6J("ngIf",e.currentProfile())}}function Ee(n,i){1&n&&(t.TgZ(0,"div",41),t._UZ(1,"mat-spinner"),t.qZA()),2&n&&t.Q6J("@fadeIn",void 0)}function Be(n,i){if(1&n&&(t.ynx(0),t.YNc(1,Ne,8,3,"div",0),t.YNc(2,Re,8,1,"div",24),t.YNc(3,Ee,2,1,"div",25),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",0!==e.buddyCount&&e.buddiesLoaded),t.xp6(1),t.Q6J("ngIf",e.noBuddiesResult||e.noBuddies),t.xp6(1),t.Q6J("ngIf",!e.buddiesLoaded)}}function Ue(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",31),t.NdJ("click",function(){return t.CHM(e),t.oxw(4).hideLogsClear()}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function Ve(n,i){if(1&n&&(t.TgZ(0,"div",32)(1,"div",43)(2,"div",44)(3,"h4")(4,"strong"),t._uU(5),t.qZA()(),t.TgZ(6,"h4"),t._uU(7),t.qZA(),t.TgZ(8,"h4"),t._uU(9),t.qZA()(),t.TgZ(10,"div",45)(11,"h4"),t._uU(12),t.qZA(),t.TgZ(13,"h4"),t._uU(14),t.qZA(),t.TgZ(15,"h4"),t._uU(16),t.qZA()()()()),2&n){const e=i.$implicit;t.xp6(5),t.Oqu(e.name),t.xp6(2),t.Oqu(e.type),t.xp6(2),t.Oqu(e.date),t.xp6(3),t.Oqu(e.time),t.xp6(2),t.Oqu(e.distance),t.xp6(2),t.Oqu(e.speed)}}function $e(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"mat-form-field",26)(2,"mat-label"),t._uU(3,"Search"),t.qZA(),t.TgZ(4,"input",27,42),t.NdJ("focus",function(){return t.CHM(e),t.oxw(3).showLogsClear()})("blur",function(){return t.CHM(e),t.oxw(3).hideLogsClear()})("input",function(){t.CHM(e);const r=t.MAs(5);return t.oxw(3).searchLogs(r)}),t.qZA(),t.YNc(6,Ue,3,0,"button",29),t.qZA(),t.YNc(7,Ve,17,6,"div",30),t.qZA()}if(2&n){const e=t.oxw(3);t.Q6J("@fadeIn",void 0),t.xp6(6),t.Q6J("ngIf",e.clearLogsbutton),t.xp6(1),t.Q6J("ngForOf",e.logs)}}function Fe(n,i){1&n&&(t.ynx(0),t.TgZ(1,"mat-hint",13),t._uU(2,"Record an activity on Strava or "),t.qZA(),t.TgZ(3,"a",46)(4,"u"),t._uU(5,"Add Activity"),t.qZA()(),t.BQk())}function Je(n,i){if(1&n&&(t.TgZ(0,"div",38)(1,"mat-hint",13),t._uU(2,"No Activities"),t.qZA(),t._UZ(3,"br"),t.YNc(4,Fe,6,0,"ng-container",0),t.qZA()),2&n){const e=t.oxw(3);t.xp6(4),t.Q6J("ngIf",e.currentProfile())}}function Qe(n,i){1&n&&(t.TgZ(0,"div",41),t._UZ(1,"mat-spinner"),t.qZA()),2&n&&t.Q6J("@fadeIn",void 0)}function je(n,i){if(1&n&&(t.ynx(0),t.YNc(1,$e,8,3,"div",0),t.YNc(2,Je,5,1,"div",24),t.YNc(3,Qe,2,1,"div",25),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!e.noLogs&&e.logsLoaded),t.xp6(1),t.Q6J("ngIf",e.noLogsResult||e.noLogs),t.xp6(1),t.Q6J("ngIf",!e.logsLoaded)}}const Ye=function(n){return{"background-image":n}};function qe(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"mat-grid-list",7)(1,"div",8)(2,"div",9)(3,"div",10),t._UZ(4,"img",11),t.qZA(),t.TgZ(5,"div",12)(6,"div",13)(7,"h1"),t._uU(8),t.qZA(),t.TgZ(9,"h3"),t._uU(10),t.qZA()(),t.TgZ(11,"div",14)(12,"div",15),t.NdJ("click",function(){return t.CHM(e),t.MAs(25).click()}),t.TgZ(13,"div",13),t._uU(14),t.qZA(),t.TgZ(15,"div"),t._uU(16,"Buddies"),t.qZA()(),t.TgZ(17,"div",15),t.NdJ("click",function(){return t.CHM(e),t.MAs(31).click()}),t.TgZ(18,"div",13),t._uU(19),t.qZA(),t.TgZ(20,"div"),t._uU(21,"Activities"),t.qZA()()()()(),t.TgZ(22,"div",16)(23,"div",17)(24,"h4",18,19),t.NdJ("click",function(){return t.CHM(e),t.oxw().toggleBuddies()}),t._uU(26,"Buddies"),t.qZA(),t.YNc(27,Se,2,1,"ng-container",0),t.YNc(28,Ae,2,0,"ng-container",0),t.qZA(),t.TgZ(29,"div",17)(30,"h4",18,20),t.NdJ("click",function(){return t.CHM(e),t.oxw().toggleLogs()}),t._uU(32,"Activities"),t.qZA(),t.YNc(33,Ie,2,0,"ng-container",0),t.YNc(34,Oe,2,1,"ng-container",0),t.qZA()(),t.TgZ(35,"div",21),t.YNc(36,Be,4,3,"ng-container",0),t.YNc(37,je,4,3,"ng-container",0),t.qZA()()()}if(2&n){const e=t.oxw();t.Q6J("@fadeIn",void 0),t.xp6(4),t.Q6J("ngStyle",t.VKq(13,Ye,"url("+e.profileImage+")")),t.xp6(4),t.AsE("",null==e.displayUser?null:e.displayUser.userName," ",null==e.displayUser?null:e.displayUser.userSurname,""),t.xp6(2),t.Oqu(null==e.displayUser?null:e.displayUser.location),t.xp6(4),t.Oqu(e.buddyCount),t.xp6(5),t.Oqu(e.activityCount),t.xp6(8),t.Q6J("ngIf",e.toggle),t.xp6(1),t.Q6J("ngIf",!e.toggle),t.xp6(5),t.Q6J("ngIf",e.toggle),t.xp6(1),t.Q6J("ngIf",!e.toggle),t.xp6(2),t.Q6J("ngIf",e.toggle),t.xp6(1),t.Q6J("ngIf",!e.toggle)}}let bt=(()=>{class n{constructor(e,s,r,o,c){this.apollo=e,this.cookie=s,this.activated=r,this.router=o,this.afStorage=c,this.buddyCount=0,this.clearBuddiesbutton=!1,this.noBuddiesResult=!1,this.noBuddies=!1,this.buddiesLoaded=!1,this.activityCount=0,this.clearLogsbutton=!1,this.noLogsResult=!1,this.noLogs=!1,this.logs=[],this.logsOriginal=[],this.logsLoaded=!1,this.eventBuddies=new _t.x,this.eventLogs=new _t.x,this.guestprofile=!1,this.loading=!0,this.toggle=!0}changeProfile(e){this.logsLoaded=!1,this.buddiesLoaded=!1,this.buddyCount=0,this.activityCount=0,this.loading=!0,this.router.navigate([`/profile/${e}`])}openSheet(e){console.log("open sheet")}checkSelf(e){return this.cookie.get("id")!=e}ngOnInit(){this.activated.params.subscribe(e=>{const s=null==e?void 0:e.id;this.id=s,null==s&&(this.id=this.cookie.get("id")),this.getCurrentUser().subscribe({next:r=>{this.displayUser=r.data.getUser,this.loading=!1,this.getData(this.displayUser.email),this.ref=this.afStorage.ref("UserProfileImage/"+this.id),this.ref.getDownloadURL().subscribe(o=>{this.profileImage=o})}})})}getData(e){this.getBuddies(e).subscribe({next:s=>{this.fetchImages(s.data.getConnections).then(r=>{this.buddies=r,this.buddiesOriginal=r}),this.buddiesOriginal=this.buddies,this.buddiesLoaded=!0}}),this.getActivityLogs(e).subscribe({next:s=>{const r=[];s.data.getLogs.map(o=>{r.push(this.convertToCard(o))}),this.logs=r,this.logsLoaded=!0,this.logsOriginal=this.logs,this.activityCount=r.length,0==this.logs.length&&(this.noLogs=!0)}})}fetchImages(e){return this.buddyCount=0,new Promise((s,r)=>{const o=[];e.forEach(c=>{this.afStorage.ref(`UserProfileImage/${c.id}`).getDownloadURL().pipe((0,de.b)(l=>{const u={image:l},a=Object.assign(Object.assign({},c),u);++this.buddyCount,o.push(a)})).subscribe()}),s(o)})}getCurrentUser(){return this.apollo.query({query:V.Ps`query{getUser(
        UserID:"${this.id}"
      ){
          userName,
          userSurname,
          location,
          longitude,
          latitude,
          stravaToken,
          dob,
          gender,
          email,
          cellNumber,
          bio,
          metrics{lift , ride , run , swim},
          buddies
      }
      }
      `})}getActivityLogs(e){return this.apollo.query({query:V.Ps`query{getLogs(
          email:"${e}" 
        ){
          user,
          activityType, 
          dateComplete,
          distance,
          name,
          speed,
          time
        }
        }
        `})}getBuddies(e){return this.apollo.query({query:V.Ps`query{
        getConnections(
          email: "${e}",
      ){
        userName,
        userSurname,
        location,
        longitude,
        latitude,
        stravaToken,
        dob,
        gender,
        email,
        cellNumber,
        bio,
        metrics{lift , ride , run , swim},
        buddies,
        id
      }
      }
      `})}convertToCard(e){const s=new Date(e.dateComplete);return{name:e.name,type:this.type(e.activityType),distance:this.metersToKm(e.distance),speed:this.convertSpeed(e),time:this.secondsToString(e.time),date:`${s.getDate()}/${s.getMonth()}/${s.getFullYear()}`}}type(e){return"Running"==e?"Run":"Riding"==e?"Ride":"Swimming"==e?"Swim":"Weights"}convertSpeed(e){const s=e.speed;if("Running"==e.activityType){let r=16.666666666667/Number(s),o=0;for(;r>1;)o++,r--;const c=Math.round(100*Math.abs(r)/100*60);return 1!=c.toString().length?o.toString()+":"+c.toString()+" min/km":o.toString()+":"+c.toString()+"0 min/km"}return"Riding"==e.activityType?(Math.round(3.6*s*100)/100).toString()+" km/h":"Swimming"==e.activityType?"2:00 min/100m":""}metersToKm(e){return(Math.round(100*Number(e/1e3))/100).toString()+"km"}secondsToString(e){e/=60;let s=0;for(;e>=60;)s++,e-=60;const r=Math.round(e);return 0==s?`${r} mins`:`${s} hours ${r} mins`}getSportString(e){if(null==(null==e?void 0:e.metrics))return"";const s=[];(null==e?void 0:e.metrics.run)&&s.push("Run"),(null==e?void 0:e.metrics.ride)&&s.push("Ride"),(null==e?void 0:e.metrics.swim)&&s.push("Swim"),(null==e?void 0:e.metrics.lift)&&s.push("Weights");let r="";for(let o=0;o<s.length;o++)r+=s[o],o<s.length-1&&(r+=", ");return r}toggleBuddies(){this.toggle=!0}toggleLogs(){this.toggle=!1}showBuddiesClear(){this.clearBuddiesbutton=!0}hideBuddiesClear(){this.clearBuddiesbutton=!1}clearBuddiesSearch(){this.clearBuddiesbutton=!1,this.buddySearchBox.nativeElement.value="",this.buddies=this.buddiesOriginal}searchBuddies(e){const s=e.value;if(0==s.length)return this.buddies=this.buddiesOriginal,void(this.noBuddiesResult=!1);const r=new X(this.buddiesOriginal,{keys:["userName","userSurname","location"]}).search(s);this.buddies=[],r.map(o=>{this.buddies.push(o.item)}),this.noBuddiesResult=0==this.buddies.length}currentProfile(){const e=this.activated.snapshot.paramMap.get("id");return null==e||e==this.cookie.get("id")}searchLogs(e){const s=e.value;if(0==s.length)return this.logs=this.logsOriginal,void(this.noLogsResult=!1);const r=new X(this.logsOriginal,{keys:["name","type","distance","speed","date","time"]}).search(s);this.logs=[],r.map(o=>{this.logs.push(o.item)}),this.noLogsResult=0==this.logs.length}showLogsClear(){this.clearLogsbutton=!0}hideLogsClear(){this.clearLogsbutton=!1}clearLogsSearch(){this.clearLogsbutton=!1,this.logSearchBox.nativeElement.value="",this.logs=this.logsOriginal}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(V._M),t.Y36(mt.N),t.Y36(R.gz),t.Y36(R.F0),t.Y36(ge.Q1))},n.\u0275cmp=t.Xpm({type:n,selectors:[["training-buddy-profile-page"]],viewQuery:function(e,s){if(1&e&&(t.Gf(ye,5),t.Gf(Ce,5)),2&e){let r;t.iGM(r=t.CRH())&&(s.buddySearchBox=r.first),t.iGM(r=t.CRH())&&(s.logSearchBox=r.first)}},decls:5,vars:4,consts:[[4,"ngIf"],["title","Training Buddy",4,"ngIf"],["class","spinner","id","pagespinner",4,"ngIf"],["class","cont","cols","1","rows","1","rowHeight","2:1",4,"ngIf"],[1,"navfix"],["title","Training Buddy"],["id","pagespinner",1,"spinner"],["cols","1","rows","1","rowHeight","2:1",1,"cont"],["id","container"],[1,"row","padding"],[1,"profilecol"],["id","profilepic",1,"my-2","ml-2",3,"ngStyle"],[1,"statsblock"],[1,"text-center"],[1,"row","statscol"],[3,"click"],[1,"row","space-around","mt-5"],[1,"fullwidth","text-center"],[1,"link",3,"click"],["toggleBuddiesButton",""],["toggleLogsButton",""],[1,"padding"],[1,"hrdark","animation-perform"],[1,"hrlight","animation-perform"],["class","my-6",4,"ngIf"],["class","spinner","id","childspinner",4,"ngIf"],["appearance","outline",1,"mt-3"],["id","search","matInput","","placeholder","Afternoon Run...","name","search",3,"focus","blur","input"],["buddySearchBox",""],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["class","max-w-md mx-auto bg-white rounded-xl shadow-md overflow-hidden max-w-2xl mt-3",4,"ngFor","ngForOf"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[1,"max-w-md","mx-auto","bg-white","rounded-xl","shadow-md","overflow-hidden","max-w-2xl","mt-3"],[1,"m-3","row","space-between","align-content"],[1,"row","align-content","cursor",3,"click"],[1,"my-2","buddypic",3,"src"],[1,"ml-6"],[1,"text-center","mx-5","button",3,"click"],[1,"my-6"],["class","text-center",4,"ngIf"],["id","configurelink","routerLink","/dashboard"],["id","childspinner",1,"spinner"],["logSearchBox",""],[1,"m-3"],[1,"flex","justify-around"],[1,"flex","justify-between"],["id","configurelink","routerLink","/addactivity"]],template:function(e,s){1&e&&(t.YNc(0,we,1,0,"training-buddy-settings-navbar",0),t.YNc(1,Me,1,0,"training-buddy-back-navbar",1),t.YNc(2,Te,2,0,"div",2),t.YNc(3,qe,38,15,"mat-grid-list",3),t._UZ(4,"training-buddy-navbar",4)),2&e&&(t.Q6J("ngIf",s.currentProfile()),t.xp6(1),t.Q6J("ngIf",!s.currentProfile()),t.xp6(1),t.Q6J("ngIf",s.loading),t.xp6(1),t.Q6J("ngIf",!s.loading))},directives:[U.O5,fe,pe.p,_e.Ou,me.Il,U.PC,J.KE,J.hX,xe.Nt,ve.lW,J.R9,vt.Hw,U.sg,J.bx,R.yS,be.S],styles:["#pagespinner[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}#childspinner[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:10%}.animation-perform[_ngcontent-%COMP%]{will-change:auto}.spinner[_ngcontent-%COMP%]     .mat-progress-spinner circle, .mat-spinner[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{stroke:#1b1a1b}.cont[_ngcontent-%COMP%]{padding-bottom:1px}#container[_ngcontent-%COMP%]{max-width:400px;width:100%;margin:2em auto;background-color:#fff;margin-bottom:150px!important}.padding[_ngcontent-%COMP%]{padding:20px!important}.link[_ngcontent-%COMP%]:hover{cursor:pointer}.hrlight[_ngcontent-%COMP%]{height:1.5px;background-color:#e4e6eb;border:none}.hrdark[_ngcontent-%COMP%]{height:1.5px;background-color:#1b1a1b!important;border:none}.logInLink[_ngcontent-%COMP%]:hover{cursor:pointer}h1[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{margin-bottom:0%}h4[_ngcontent-%COMP%]{margin-bottom:3%}.fullwidth[_ngcontent-%COMP%]{width:100%}  .mat-form-field-wrapper{margin-bottom:-1.25em}.text-center[_ngcontent-%COMP%]{text-align:center}.space-around[_ngcontent-%COMP%]{justify-content:space-around}.row[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.statscol[_ngcontent-%COMP%]{width:100%;align-items:center;justify-content:space-evenly}.statsblock[_ngcontent-%COMP%]{width:70%}p[_ngcontent-%COMP%]{word-break:break-all;white-space:normal}#profilepic[_ngcontent-%COMP%]{background-color:#1b1a1b13;height:120px;width:120px;border-radius:50%;background-size:cover;background-repeat:no-repeat;margin-bottom:5%!important}mat-form-field[_ngcontent-%COMP%]{display:block}.spinner[_ngcontent-%COMP%]     .mat-progress-spinner circle, .mat-spinner[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{stroke:#000}mat-spinner[_ngcontent-%COMP%]{margin:auto}h2[_ngcontent-%COMP%]{margin-bottom:0%!important}.row[_ngcontent-%COMP%]{display:flex;flex-direction:row}.space-between[_ngcontent-%COMP%]{justify-content:space-between}.align-content[_ngcontent-%COMP%]{align-items:center}.buddypic[_ngcontent-%COMP%]{background-color:#1b1a1b13;height:75px;width:75px;border-radius:50%;background-size:cover;background-repeat:no-repeat;margin-bottom:5%!important}.cursor[_ngcontent-%COMP%]:hover{cursor:pointer}"],data:{animation:[(0,x.X$)("swipeRight",[(0,x.eR)(":enter",[(0,x.jt)(120,(0,x.F4)([(0,x.oB)({transform:"translate3d(-100%, 0, 0)",visibility:"visible"}),(0,x.oB)({transform:"translate3d(0, 0, 0)"})]))]),(0,x.eR)(":leave",[])]),(0,x.X$)("swipeLeft",[(0,x.eR)(":enter",[(0,x.jt)(120,(0,x.F4)([(0,x.oB)({transform:"translate3d(100%, 0, 0)",visibility:"visible"}),(0,x.oB)({transform:"translate3d(0, 0, 0)"})]))]),(0,x.eR)(":leave",[])]),(0,x.X$)("fadeIn",[(0,x.eR)(":enter",[(0,x.jt)(120,(0,x.F4)([(0,x.oB)({opacity:"0"}),(0,x.oB)({opacity:"1"})]))])])]}}),n})();const He=[{path:"",component:bt},{path:":id",component:bt}];let De=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[R.Bz.forChild(He)],R.Bz]}),n})();var Ke=p(7918);let ze=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[mt.N],imports:[[U.ez,De,Ke.W]]}),n})()}}]);